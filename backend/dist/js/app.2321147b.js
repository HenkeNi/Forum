(function(e){function t(t){for(var r,o,i=t[0],u=t[1],c=t[2],d=0,h=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&h.push(n[o][0]),n[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(h.length)h.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],r=!0,i=1;i<s.length;i++){var u=s[i];0!==n[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=s[0]))}return e}var r={},n={app:0},a=[];function o(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=r,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(s,r,function(t){return e[t]}.bind(null,r));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";s("85ec")},"0ced":function(e,t,s){"use strict";s("3b4e")},1503:function(e,t,s){"use strict";s("2457")},"154b":function(e,t,s){},"18f1":function(e,t,s){"use strict";s("8008")},"1b8b":function(e,t,s){},2457:function(e,t,s){},"252d":function(e,t,s){},"280c":function(e,t,s){"use strict";s("4036")},"30f1":function(e,t,s){"use strict";s("ab41")},"34ca":function(e,t,s){},3540:function(e,t,s){"use strict";s("34ca")},"3b4e":function(e,t,s){},4036:function(e,t,s){},5294:function(e,t,s){"use strict";s("154b")},"557a":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var r=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("Header"),s("router-view"),s("Footer")],1)},a=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"modals"},[s("SignInModal",{model:{value:e.signInModalOpen,callback:function(t){e.signInModalOpen=t},expression:"signInModalOpen"}}),s("RegisterModal",{model:{value:e.registerModalOpen,callback:function(t){e.registerModalOpen=t},expression:"registerModalOpen"}})],1),s("div",{staticClass:"header-component"},[s("div",{staticClass:"overlay"},[s("h1",{staticClass:"title",on:{click:e.backToHomePage}},[e._v("Superhero Forum")]),s("div",{staticClass:"menu-options"},[s("h3",{on:{click:e.goToProfile}},[e._v(e._s(e.currentUser.username))]),s("div",{staticClass:"sign-in",attrs:{id:"sign-in-options"}},[s("h3",{on:{click:e.showSignInModal}},[e._v("Login /")]),s("h3",{on:{click:e.showRegisterModal}},[e._v("Register")])]),s("div",{attrs:{id:"logout-option"}},[s("h3",{on:{click:e.signOutUser}},[e._v("Logout")])])])])]),s("div",{staticClass:"line"})])},i=[],u=(s("d3b7"),s("96cf"),s("1da1")),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"modal"},[s("div",{staticClass:"form"},[s("h2",{staticClass:"title"},[e._v("Sign In")]),s("form",[e._m(0),s("p",{directives:[{name:"show",rawName:"v-show",value:e.failed,expression:"failed"}],staticClass:"warning"},[e._v("Wrong email or password!")])]),s("div",{staticClass:"buttons"},[s("input",{attrs:{type:"submit",value:"Login"},on:{click:e.login}}),s("button",{on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("Close")])])])])},l=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"input-fields"},[s("input",{attrs:{required:"",type:"email",id:"email",name:"email",placeholder:"email"}}),s("br"),s("input",{attrs:{required:"",type:"password",id:"password",name:"password",placeholder:"password"}}),s("br")])}],d={name:"SignIn-Modal",props:{value:{required:!0}},data:function(){return{failed:!1}},methods:{close:function(){this.clearFields(),this.failed=!1,this.$emit("input",!this.value)},login:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.preventDefault(),s.next=3,t.$store.dispatch("signInUser",{email:document.getElementById("email").value,password:document.getElementById("password").value});case 3:r=s.sent,r?t.close():(console.log("Login attempt failed!"),t.failed=!0);case 5:case"end":return s.stop()}}),s)})))()},clearFields:function(){document.getElementById("email").value="",document.getElementById("password").value=""}}},h=d,m=(s("18f1"),s("2877")),f=Object(m["a"])(h,c,l,!1,null,"a769ab9c",null),p=f.exports,v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"modal"},[s("div",{staticClass:"form"},[e._m(0),s("div",[s("form",[e._m(1),s("p",{directives:[{name:"show",rawName:"v-show",value:e.failed,expression:"failed"}]},[e._v("Registration failed!")]),s("div",{staticClass:"buttons"},[s("button",{staticClass:"register",attrs:{type:"submit",value:"Register"},on:{click:e.register}},[e._v("Register")]),s("h4",{staticClass:"cancel",on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("Cancel")])])])])])])},g=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"title"},[s("h2",[e._v("Create Account")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"input-fields"},[s("input",{attrs:{type:"email",id:"reg-email",name:"reg-email",placeholder:"email",required:""}}),s("br"),s("input",{attrs:{type:"text",id:"reg-username",name:"reg-username",placeholder:"username",required:""}}),s("br"),s("input",{attrs:{type:"password",id:"reg-password",name:"reg-password",minlength:"8",placeholder:"password",required:""}}),s("br")])}],b={name:"Register-Modal",props:{value:{required:!0}},data:function(){return{failed:!1}},methods:{close:function(){this.clearFields(),this.failed=!1,this.$emit("input",!this.value)},register:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.preventDefault(),s.next=3,t.$store.dispatch("registerUser",{email:document.getElementById("reg-email").value,password:document.getElementById("reg-password").value,username:document.getElementById("reg-username").value});case 3:r=s.sent,r.error&&(t.failed=!0),r&&t.close();case 6:case"end":return s.stop()}}),s)})))()},clearFields:function(){document.getElementById("reg-email").value="",document.getElementById("reg-password").value="",document.getElementById("reg-username").value=""}}},w=b,_=(s("848b"),Object(m["a"])(w,v,g,!1,null,"388290f4",null)),C=_.exports,x={components:{SignInModal:p,RegisterModal:C},data:function(){return{signInModalOpen:!1,registerModalOpen:!1}},computed:{currentUser:function(){return this.$store.getters.currentUser||""}},methods:{backToHomePage:function(){"/"!==this.$route.path&&this.$router.push("/")},hideElements:function(e){var t=document.getElementById("sign-in-options"),s=document.getElementById("logout-option");e?(t.style.display="none",s.style.display="block"):(t.style.display="block",s.style.display="none")},showSignInModal:function(){this.signInModalOpen=!this.signInModalOpen},showRegisterModal:function(){this.registerModalOpen=!this.registerModalOpen},goToProfile:function(){this.$router.push({name:"ProfilePage",params:{user:this.currentUser}})},signOutUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/logout",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e.currentUser})});case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,s?(console.log("Logout Succeeded!\n",s),e.hideElements(!1),e.$store.commit("setCurrentUser",null)):console.log("Logout failed!");case 7:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.hideElements(!1)},watch:{currentUser:function(){null===this.$store.getters.currentUser?this.hideElements(!1):this.hideElements(!0)}}},y=x,O=(s("58cf"),Object(m["a"])(y,o,i,!1,null,"1d8a552f",null)),P=O.exports,E=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},k=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"footer"},[s("h4",[e._v("@Batman")])])}],R={data:function(){return{some:1}}},j=R,T=(s("9386"),Object(m["a"])(j,E,k,!1,null,"28980c62",null)),$=T.exports,I={name:"app",components:{Header:P,Footer:$},created:function(){this.$store.dispatch("fetchCurrentUser")}},M=I,U=(s("034f"),Object(m["a"])(M,n,a,!1,null,null,null)),S=U.exports,D=s("8c4f"),N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home-page"},[s("subforum-list")],1)},L=[],A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"subforum-list"},[s("h1",{staticClass:"forum"},[e._v("Forums")]),s("br"),e._l(e.subforums,(function(e){return s("SubforumListItem",{key:e.id,attrs:{subforum:e}})}))],2)},B=[],J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"subforum-container",on:{click:e.goToSubforum}},[e._m(0),s("div",{staticClass:"info"},[s("div",{staticClass:"title-container"},[s("h3",{staticClass:"subforum-name text"},[e._v(e._s(e.subforum.title))]),s("p",{staticClass:"text"},[e._v(e._s(e.subforum.description))])]),s("div",{staticClass:"threads"},[s("p",{staticClass:"threads-title"},[e._v("Threads")]),s("p",{staticClass:"amount"},[e._v(e._s(this.threadsAmount))])])])])},F=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"icon-img"},[s("span",{staticClass:"material-icons",staticStyle:{"font-size":"5em"}},[e._v("chat")])])}],q={props:["subforum"],data:function(){return{threadsAmount:0}},methods:{goToSubforum:function(){this.$router.push({name:"SubforumPage",params:{subforum:this.subforum}})},fetchThreadCount:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/threads/count/".concat(e.subforum.id));case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,e.threadsAmount=s[0]["COUNT(subforumId)"];case 7:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchThreadCount()}},H=q,W=(s("8d09"),Object(m["a"])(H,J,F,!1,null,"79055a50",null)),z=W.exports,Y={components:{SubforumListItem:z},data:function(){return{subforums:[]}},methods:{fetchSubforums:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/subforums");case 2:return s=t.sent,t.next=5,s.json();case 5:e.subforums=t.sent;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchSubforums()}},G=Y,K=(s("5294"),Object(m["a"])(G,A,B,!1,null,"35b48c80",null)),Q=K.exports,V={components:{SubforumList:Q}},X=V,Z=(s("f31d"),Object(m["a"])(X,N,L,!1,null,"a6bf6d56",null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"subforum-page"},[s("div",{staticClass:"top"},[s("div",{staticClass:"info"},[s("h1",{staticClass:"title"},[e._v(e._s(this.$route.params.subforum.title))]),s("h2",[e._v(e._s(this.$route.params.subforum.description))])]),s("div",{staticClass:"create"},[s("h3",{on:{click:e.createNewThread}},[e._v("Create Thread")])])]),s("hr",{staticStyle:{border:"black",color:"black",width:"60%",height:"2px","background-color":"black"}}),s("ThreadList",{staticClass:"thread-list",attrs:{subforum:this.$route.params.subforum}})],1)},se=[],re=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"thread-list"},e._l(e.threads,(function(e,t){return s("ThreadListItem",{key:e.id,attrs:{thread:e,index:t}})})),1)},ne=[],ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"thread-container",class:{evenRow:!e.isEvenRow},on:{click:e.goToThreadPage}},[s("div",{staticClass:"container"},[s("div",{staticClass:"left"},[e._m(0),s("div",{staticClass:"user-info"},[s("div",{staticClass:"title-close"},[s("div",{staticClass:"thread-title"},[s("h2",{staticClass:"title"},[e._v(e._s(e.thread.title))])])]),s("div",{staticClass:"thread-info"},[s("h4",[s("span",{staticClass:"author",on:{click:e.goToProfile}},[e._v(e._s(e.author.username)+" - "+e._s(e.publishedDate))])])])])]),s("div",{staticClass:"closed"},[e.isClosed?s("h2",[e._v("closed")]):e._e(),s("div",{staticClass:"amount"},[s("p",[e._v("Posts")]),s("p",[e._v(e._s(e.postsAmount))])])])])])},oe=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-icon"},[s("img",{attrs:{src:"https://image.flaticon.com/icons/png/512/21/21294.png"}})])}],ie={props:["thread","index"],data:function(){return{author:Object,postsAmount:0}},computed:{publishedDate:function(){var e=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],t=new Date(this.thread.published_time);return e[t.getMonth()]+"  "+t.getDay()+", "+t.getFullYear()},isEvenRow:function(){return this.index%2==0},isClosed:function(){return 0==this.thread.active}},methods:{goToThreadPage:function(){this.$router.push({name:"ThreadPage",params:{thread:this.thread}})},goToProfile:function(){this.$router.push({name:"ProfilePage",params:{user:this.author}})},fetchAuthor:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/users/".concat(e.thread.userId));case 2:return s=t.sent,t.next=5,s.json();case 5:e.author=t.sent;case 6:case"end":return t.stop()}}),t)})))()},fetchPostAmount:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/posts/count/".concat(e.thread.id));case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,e.postsAmount=s[0]["COUNT(threadId)"];case 7:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchAuthor(),this.fetchPostAmount()}},ue=ie,ce=(s("d93d"),Object(m["a"])(ue,ae,oe,!1,null,"5ef49ddc",null)),le=ce.exports,de={props:["subforum"],components:{ThreadListItem:le},data:function(){return{threads:[]}},methods:{fetchAllThreads:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/threads/".concat(e.subforum.id));case 2:return s=t.sent,t.next=5,s.json();case 5:e.threads=t.sent;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchAllThreads()}},he=de,me=(s("962f"),Object(m["a"])(he,re,ne,!1,null,"5373e087",null)),fe=me.exports,pe={components:{ThreadList:fe},methods:{createNewThread:function(){this.$router.push({name:"threadCreation",params:{subforum:this.$route.params.subforum}})}}},ve=pe,ge=(s("280c"),Object(m["a"])(ve,te,se,!1,null,"04511ab2",null)),be=ge.exports,we=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"thread-page",attrs:{id:"thread-page"}},[s("NewPostModal",{attrs:{threadId:this.thread.id},on:{reload:e.fetchPosts,myEvent:e.modalClosed},model:{value:e.newpostModalOpen,callback:function(t){e.newpostModalOpen=t},expression:"newpostModalOpen"}}),s("div",{staticClass:"page-head"},[s("h1",{staticClass:"title",class:{showclose:e.showCloseThread}},[e._v(e._s(e.thread.title))]),e.showCloseThread?s("div",{staticClass:"block"},[s("h2",{on:{click:e.closeThread}},[e._v("Close Thread")])]):e._e()]),e.threadClosed?s("div",{staticClass:"closed"},[s("h3",{staticClass:"closed-text"},[e._v("Thread Closed!")])]):e._e(),s("PostList",{staticClass:"list",attrs:{posts:this.posts,thread:this.thread}}),s("div",{staticClass:"buttons"},[e.threadClosed?e._e():s("div",{staticClass:"post",on:{click:e.newPost}},[s("h2",[e._v("New Post")])])]),e.shouldPost?s("div",{staticClass:"newpost",attrs:{id:"newpost"}},[s("NewPost",{attrs:{threadId:this.thread.id}})],1):e._e()],1)},_e=[],Ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"post-list"},e._l(e.posts,(function(t){return s("PostListItem",{key:t.id,attrs:{post:t,thread:e.thread}})})),1)},xe=[],ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"post-container",class:{warning:e.isWarning}},[s("div",{staticClass:"profile",on:{click:e.goToProfile}},[s("h3",{staticClass:"author"},[e._v(e._s(e.author.username))]),s("img",{attrs:{src:"https://image.flaticon.com/icons/png/512/21/21294.png"}}),s("h4",[e._v(e._s(e.author.userRole))])]),s("div",{staticClass:"main"},[s("div",{staticClass:"top"},[s("div",{staticClass:"published"},[s("h3",[e._v(e._s(e.publishedDate))])]),s("div",[e.isWarning?s("h2",[e._v("Warning!")]):e._e()]),s("div",{staticClass:"options"},[e.isEditable?s("div",{staticClass:"edit",on:{click:e.edit}},[s("h3",[e._v("Edit")])]):e._e(),s("div",{staticClass:"remove"},[e.isAuthorized?s("div",{on:{click:e.remove}},[s("h3",[e._v("remove")])]):e._e()])])]),s("div",{staticClass:"message"},[e.shouldEdit?s("div",[s("EditPost",{attrs:{post:e.post}})],1):e._e(),e.shouldEdit?e._e():s("div",[e.isEdited?s("p",{staticClass:"has-edited"},[e._v("(Edited)")]):e._e(),s("h2",{staticClass:"main-text"},[e._v(e._s(e.post.message))])])])])])},Oe=[],Pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("textarea",{staticClass:"textarea",attrs:{id:"edit-message",type:"text",name:"edit-message",placeholder:"Enter new message...",cols:"40",rows:"5",required:""}}),s("div",[s("button",{on:{click:e.updateMessage}},[e._v("Update")]),s("button",{on:{click:e.cancel}},[e._v("Cancel")])])])},Ee=[],ke={props:["post"],methods:{updateMessage:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/posts/".concat(e.post.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.post.id,message:document.getElementById("edit-message").value,userId:e.post.userId,isEdited:1})});case 2:e.$parent.fetchPostsInParent(),e.cancel();case 4:case"end":return t.stop()}}),t)})))()},cancel:function(){document.getElementById("edit-message").value="",this.$parent.shouldEdit=!1}}},Re=ke,je=Object(m["a"])(Re,Pe,Ee,!1,null,"fd893470",null),Te=je.exports,$e={components:{EditPost:Te},props:["post","thread"],data:function(){return{author:Object,shouldEdit:!1}},computed:{isWarning:function(){return 1===this.post.warning},isAuthorized:function(){var e=this.$store.getters.currentUser;return!!e&&("admin"===e.userRole||"moderator"===e.userRole)},isEditable:function(){return 1===this.thread.active&&(this.isAuthorized||null!==this.$store.getters.currentUser&&this.$store.getters.currentUser.id===this.author.id)},isEdited:function(){return 1===this.post.isEdited},publishedDate:function(){var e=new Date(this.post.published_time),t=new Date;if(e.getDate()<t.getDate()-7){var s=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];return s[e.getMonth()]+"  "+e.getDay()+", "+e.getFullYear()}var r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],n=e.getDate()===t.getDate()?"Today":e.getDate()===t.getDate()-1?"Yesterday":r[e.getDay()];return n+" at "+e.getHours()+":"+e.getMinutes()}},methods:{fetchAuthor:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/users/".concat(e.post.userId));case 2:return s=t.sent,t.next=5,s.json();case 5:e.author=t.sent;case 6:case"end":return t.stop()}}),t)})))()},remove:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/posts/".concat(e.post.id),{method:"delete"});case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,console.log(s),e.fetchPostsInParent();case 8:case"end":return t.stop()}}),t)})))()},edit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.shouldEdit=!e.shouldEdit;case 1:case"end":return t.stop()}}),t)})))()},fetchPostsInParent:function(){this.$parent.reload()},goToProfile:function(){this.$router.push({name:"ProfilePage",params:{user:this.author}})}},created:function(){this.fetchAuthor()}},Ie=$e,Me=(s("ff51"),Object(m["a"])(Ie,ye,Oe,!1,null,"5c451661",null)),Ue=Me.exports,Se={components:{PostListItem:Ue},props:["posts","thread"],methods:{reload:function(){this.$parent.fetchPosts()}}},De=Se,Ne=(s("3540"),Object(m["a"])(De,Ce,xe,!1,null,"d3429cdc",null)),Le=Ne.exports,Ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"modal"},[s("div",{staticClass:"form"},[s("h2",{staticClass:"title"},[e._v("New Post")]),s("form",[e._m(0),e.showCheckbox?s("div",[s("label",{attrs:{for:"warning"}},[e._v("Warning message")]),s("br"),s("input",{attrs:{type:"checkbox",id:"warning",name:"warning"}})]):e._e(),s("input",{attrs:{type:"submit",value:"Post"},on:{click:e.submit}}),s("button",{on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("Close")])])])])},Be=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"input-fields"},[s("input",{attrs:{required:"",type:"text",id:"message",name:"message",placeholder:"Enter message"}}),s("br")])}],Je=(s("a9e3"),{name:"newpost-Modal",props:{value:{required:!0},threadId:{type:Number}},computed:{showCheckbox:function(){var e=this.$store.getters.currentUser;return!!e&&("admin"===e.userRole||"moderator"===e.userRole)}},methods:{close:function(){document.getElementById("message").value="",this.$emit("myEvent","input",!this.value)},submit:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.preventDefault(),r={message:document.getElementById("message").value,userId:t.$store.getters.currentUser.id,threadId:t.threadId,published_time:Date.now(),warning:0},t.showCheckbox&&!0===document.getElementById("warning").checked&&(r.warning=1),s.next=5,fetch("/rest/v1/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:return n=s.sent,s.next=8,n.json();case 8:n=s.sent,console.log(n),t.close();case 11:case"end":return s.stop()}}),s)})))()}}}),Fe=Je,qe=(s("9f17"),Object(m["a"])(Fe,Ae,Be,!1,null,"7efe559e",null)),He=qe.exports,We=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"post-container"},[s("form",[e._m(0),e.showCheckbox?s("div",{staticClass:"checkbox"},[s("label",{attrs:{for:"warning"}},[e._v("Warning message: ")]),s("input",{attrs:{type:"checkbox",id:"post-warning",name:"post-warning"}})]):e._e(),s("div",{staticClass:"buttons"},[s("input",{staticClass:"send",attrs:{type:"submit",value:"Post"},on:{click:function(t){return t.preventDefault(),e.createPost(t)}}}),s("button",{staticClass:"cancel",on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("Close")])])])])},ze=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"input-fields"},[s("textarea",{staticClass:"textarea",attrs:{id:"post-message",type:"text",name:"post-message",placeholder:"Enter message...",cols:"40",rows:"5",required:""}}),s("br")])}],Ye={props:["threadId"],data:function(){return{name:"hllo"}},computed:{showCheckbox:function(){var e=this.$store.getters.currentUser;return!!e&&("admin"===e.userRole||"moderator"===e.userRole)}},methods:{close:function(){this.$parent.shouldPost=!1},createPost:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.preventDefault(),r={message:document.getElementById("post-message").value,userId:t.$store.getters.currentUser.id,threadId:t.threadId,published_time:Date.now(),warning:0},t.showCheckbox&&!0===document.getElementById("post-warning").checked&&(r.warning=1),s.next=5,fetch("/rest/v1/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:return n=s.sent,s.next=8,n.json();case 8:n=s.sent,console.log(n),t.$parent.fetchPosts(),t.close();case 12:case"end":return s.stop()}}),s)})))()}},created:function(){}},Ge=Ye,Ke=(s("73f3"),Object(m["a"])(Ge,We,ze,!1,null,"6e2766c5",null)),Qe=Ke.exports,Ve={components:{PostList:Le,NewPostModal:He,NewPost:Qe},props:["thread"],data:function(){return{posts:[],threadClosed:!1,newpostModalOpen:!1,shouldPost:!1}},computed:{showCloseThread:function(){var e=this.$store.getters.currentUser;return!!e&&(("moderator"===e.userRole||"admin"===e.userRole)&&!1===this.threadClosed)},isLoggedIn:function(){return null!==this.$store.getters.currentUser}},methods:{modalClosed:function(){this.newpostModalOpen=!1,this.fetchPosts()},fetchPosts:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/posts/".concat(e.thread.id));case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,e.posts=s;case 7:case"end":return t.stop()}}),t)})))()},closeThread:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/threads/".concat(e.thread.id),{method:"PUT"});case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,console.log(s),e.threadClosed=!0;case 8:case"end":return t.stop()}}),t)})))()},newPost:function(){this.isLoggedIn?this.shouldPost=!this.shouldPost:alert("Login to post a message!")},scrollToEnd:function(){}},created:function(){this.fetchPosts(),this.threadClosed=0===this.thread.active},mounted:function(){this.fetchPosts()}},Xe=Ve,Ze=(s("30f1"),Object(m["a"])(Xe,we,_e,!1,null,"2cc93089",null)),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"thread-creation"},[e._m(0),s("form",{staticClass:"form"},[s("label",{attrs:{for:"title"}},[e._v("Title")]),s("br"),s("input",{attrs:{required:"",id:"title",type:"text"}}),s("br"),s("label",{attrs:{for:"message"}},[e._v("Message")]),s("br"),s("textarea",{attrs:{required:"",id:"message",type:"text",name:"Text1",cols:"40",rows:"5"}}),s("div",{staticClass:"buttons"},[s("button",{staticClass:"cancel",on:{click:e.goBack}},[e._v("Cancel")]),s("button",{staticClass:"confirm",on:{click:e.createThread}},[e._v("Confirm")])])])])},st=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"head"},[s("h1",{staticClass:"title"},[e._v("Thread Creation")])])}],rt={props:["subforum"],methods:{createThread:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.preventDefault(),r={title:document.getElementById("title").value,userId:t.$store.getters.currentUser.id,published_time:Date.now(),subforumId:t.$route.params.subforum.id},console.log("POSTING THREAD",r),null!==r.userId&&void 0!==r.userId){s.next=5;break}return s.abrupt("return");case 5:return s.next=7,fetch("/rest/v1/threads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 7:return n=s.sent,s.next=10,n.json();case 10:n=s.sent,t.postInitialPost(r,n),r.id=n.lastInsertRowid,t.$router.push({name:"ThreadPage",params:{thread:r}});case 14:case"end":return s.stop()}}),s)})))()},postInitialPost:function(e,t){var s=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={message:document.getElementById("message").value,userId:s.$store.getters.currentUser.id,threadId:t.lastInsertRowid,published_time:Date.now(),warning:0},console.log("POST:",r),e.next=4,fetch("/rest/v1/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:return n=e.sent,e.next=7,n.json();case 7:n=e.sent,console.log(n);case 9:case"end":return e.stop()}}),e)})))()},goBack:function(){this.$router.push({name:"SubforumPage",params:{subforum:this.subforum}})}}},nt=rt,at=(s("6ffb"),Object(m["a"])(nt,tt,st,!1,null,"0b958820",null)),ot=at.exports,it=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"profile-page"},[s("div",{staticClass:"license"},[e._m(0),s("div",{staticClass:"info"},[s("h2",{staticClass:"title"},[e._v(e._s(e.user.username))]),s("h3",[e._v("email: "+e._s(e.user.email))]),s("h3",[e._v("role: "+e._s(e.user.userRole))])])]),e.showOptions?s("div",[s("div",[s("div",{staticClass:"delete"},[s("h3",{on:{click:e.deleteUser}},[e._v("DELETE USER")])])]),s("div",{staticClass:"mode"},[e.isModerator?e._e():s("h3",{on:{click:e.makeModerator}},[e._v("Make Moderator")]),e.isModerator?s("h3",{on:{click:e.removeModerator}},[e._v("Remove Moderator")]):e._e()])]):e._e(),e.isAdminProfile?s("div",[s("h2",{staticClass:"list"},[e._v("List of users")]),s("UserList")],1):e._e()])},ut=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"image"},[s("img",{attrs:{src:"https://image.flaticon.com/icons/png/512/21/21294.png"}})])}],ct=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-list"},e._l(e.users,(function(e,t){return s("UserListItem",{key:e.id,attrs:{user:e,index:t}})})),1)},lt=[],dt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"container",on:{click:e.goToUserProfile}},[s("h2",[e._v(e._s(e.user.username))])])])},ht=[],mt={props:["user","index"],methods:{goToUserProfile:function(){console.log("GO TO PROFILE"),this.$router.push("/"),this.$router.push({name:"ProfilePage",params:{user:this.user}})}}},ft=mt,pt=(s("0ced"),Object(m["a"])(ft,dt,ht,!1,null,"339f6036",null)),vt=pt.exports,gt={components:{UserListItem:vt},data:function(){return{users:[]}},methods:{fetchAllUsers:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/users/");case 2:return s=t.sent,t.next=5,s.json();case 5:e.users=t.sent;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchAllUsers()}},bt=gt,wt=(s("1503"),Object(m["a"])(bt,ct,lt,!1,null,"656adb20",null)),_t=wt.exports,Ct={components:{UserList:_t},props:["user"],computed:{showOptions:function(){return"admin"!==this.user.userRole&&(null!==this.$store.getters.currentUser&&"admin"===this.$store.getters.currentUser.userRole)},isModerator:function(){return null!==this.user.userRole&&"moderator"===this.user.userRole},isAdminProfile:function(){return null!==this.user.userRole&&"admin"===this.user.userRole&&null!==this.$store.getters.currentUser&&"admin"===this.$store.getters.currentUser.userRole}},methods:{deleteUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/users/".concat(e.user.id),{method:"DELETE"});case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,console.log(s),e.goToHomePage();case 8:case"end":return t.stop()}}),t)})))()},goToHomePage:function(){this.$router.push("/")},goToMessagePage:function(){this.$router.push({name:"MessagePage",params:{user:this.user}})},makeModerator:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("Admin"!==e.user.userRole){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("/rest/v1/users/".concat(e.user.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userRole:"moderator"})});case 4:return s=t.sent,t.next=7,s.json();case 7:s=t.sent,console.log(s),s&&(e.user.userRole="moderator");case 10:case"end":return t.stop()}}),t)})))()},removeModerator:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/users/".concat(e.user.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userRole:"member"})});case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,console.log(s),s&&(e.user.userRole="member");case 8:case"end":return t.stop()}}),t)})))()}}},xt=Ct,yt=(s("b613"),Object(m["a"])(xt,it,ut,!1,null,"6c460d2d",null)),Ot=yt.exports,Pt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",[e._v("Send a message to "+e._s(e.user.username))])])},Et=[],kt={props:["user"]},Rt=kt,jt=Object(m["a"])(Rt,Pt,Et,!1,null,"372fe839",null),Tt=jt.exports;r["a"].use(D["a"]);var $t=[{path:"/",name:"HomePage",component:ee},{path:"/forum/:subforum",name:"SubforumPage",component:be,props:!0},{path:"/thread/:thread",name:"ThreadPage",component:et,props:!0},{path:"/threadCreation/:subforum",name:"threadCreation",component:ot,props:!0},{path:"/profile/:user",name:"ProfilePage",component:Ot,props:!0},{path:"/messagepage/:user",name:"MessagePage",component:Tt,props:!0}],It=new D["a"]({routes:$t,mode:"history",base:"/",scrollBehavior:function(){return{x:0,y:0}}}),Mt=It,Ut=s("2f62");r["a"].use(Ut["a"]);var St=new Ut["a"].Store({state:{currentUser:null},getters:{currentUser:function(e){return e.currentUser}},mutations:{setCurrentUser:function(e,t){e.currentUser=t}},actions:{fetchCurrentUser:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.commit,t.next=3,fetch("/rest/v1/whoami");case 3:return r=t.sent,t.next=6,r.json();case 6:r=t.sent,s("setCurrentUser",r),console.log("Fetched current user: ",r);case 9:case"end":return t.stop()}}),t)})))()},postNewPost:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 2:return s=t.sent,t.next=5,s.json();case 5:return s=t.sent,t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})))()},signInUser:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function s(){var r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=e.commit,s.next=3,fetch("/rest/v1/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=s.sent,s.next=6,n.json();case 6:return n=s.sent,r("setCurrentUser",n),s.abrupt("return",n);case 9:case"end":return s.stop()}}),s)})))()},registerUser:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function s(){var r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=e.dispatch,s.next=3,fetch("/rest/v1/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=s.sent,s.next=6,n.json();case 6:return n=s.sent,t.id=n.lastInsertRowid,r("signInUser",t),s.abrupt("return",n);case 10:case"end":return s.stop()}}),s)})))()}},modules:{}});r["a"].config.productionTip=!1,new r["a"]({store:St,router:Mt,render:function(e){return e(S)}}).$mount("#app")},5835:function(e,t,s){},"58cf":function(e,t,s){"use strict";s("1b8b")},6905:function(e,t,s){},"6ffb":function(e,t,s){"use strict";s("6905")},"73f3":function(e,t,s){"use strict";s("db67")},8008:function(e,t,s){},"848b":function(e,t,s){"use strict";s("9069")},"85ec":function(e,t,s){},"8d09":function(e,t,s){"use strict";s("f4e2")},9069:function(e,t,s){},9232:function(e,t,s){},9386:function(e,t,s){"use strict";s("252d")},"962f":function(e,t,s){"use strict";s("557a")},"9f17":function(e,t,s){"use strict";s("9232")},ab41:function(e,t,s){},b298:function(e,t,s){},b494:function(e,t,s){},b613:function(e,t,s){"use strict";s("5835")},d93d:function(e,t,s){"use strict";s("b494")},db67:function(e,t,s){},e30a:function(e,t,s){},f31d:function(e,t,s){"use strict";s("e30a")},f4e2:function(e,t,s){},ff51:function(e,t,s){"use strict";s("b298")}});
//# sourceMappingURL=app.2321147b.js.map