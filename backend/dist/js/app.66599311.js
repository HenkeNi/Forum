(function(e){function t(t){for(var n,o,i=t[0],u=t[1],c=t[2],d=0,h=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&h.push(s[o][0]),s[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(h.length)h.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,i=1;i<r.length;i++){var u=r[i];0!==s[u]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},s={app:0},a=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"0c31":function(e,t,r){"use strict";r("15da")},"15da":function(e,t,r){},"1b8b":function(e,t,r){},"1c67":function(e,t,r){"use strict";r("607c")},2066:function(e,t,r){},2402:function(e,t,r){"use strict";r("2066")},"252d":function(e,t,r){},"25f8":function(e,t,r){},2863:function(e,t,r){"use strict";r("286d")},"286d":function(e,t,r){},"294a":function(e,t,r){},"32ea":function(e,t,r){"use strict";r("c8d8")},"3a4b":function(e,t,r){"use strict";r("25f8")},"497e":function(e,t,r){"use strict";r("a28a")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Header"),r("router-view"),r("Footer")],1)},a=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"modals"},[r("SignInModal",{model:{value:e.signInModalOpen,callback:function(t){e.signInModalOpen=t},expression:"signInModalOpen"}}),r("RegisterModal",{model:{value:e.registerModalOpen,callback:function(t){e.registerModalOpen=t},expression:"registerModalOpen"}})],1),r("div",{staticClass:"header-component"},[r("div",{staticClass:"overlay"},[r("h1",{staticClass:"title",on:{click:e.backToHomePage}},[e._v("Superhero Forum")]),r("div",{staticClass:"menu-options"},[r("h3",{on:{click:e.goToProfile}},[e._v(e._s(e.currentUser.username))]),r("div",{staticClass:"sign-in",attrs:{id:"sign-in-options"}},[r("h3",{on:{click:e.showSignInModal}},[e._v("Login /")]),r("h3",{on:{click:e.showRegisterModal}},[e._v("Register")])]),r("div",{attrs:{id:"logout-option"}},[r("h3",{on:{click:e.signOutUser}},[e._v("Logout")])])])])]),r("div",{staticClass:"line"})])},i=[],u=(r("d3b7"),r("96cf"),r("1da1")),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"modal"},[r("div",{staticClass:"form"},[r("h2",{staticClass:"title"},[e._v("Sign In")]),r("form",[e._m(0),r("p",{directives:[{name:"show",rawName:"v-show",value:e.failed,expression:"failed"}],staticClass:"warning"},[e._v("Wrong email or password!")])]),r("div",{staticClass:"buttons"},[r("input",{attrs:{type:"submit",value:"Login"},on:{click:e.login}}),r("button",{on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("Close")])])])])},l=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"input-fields"},[r("input",{attrs:{required:"",type:"email",id:"email",name:"email",placeholder:"email"}}),r("br"),r("input",{attrs:{required:"",type:"password",id:"password",name:"password",placeholder:"password"}}),r("br")])}],d={name:"SignIn-Modal",props:{value:{required:!0}},data:function(){return{failed:!1}},methods:{close:function(){this.$emit("input",!this.value)},login:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.preventDefault(),r.next=3,fetch("/rest/v1/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:document.getElementById("email").value,password:document.getElementById("password").value})});case 3:return n=r.sent,r.next=6,n.json();case 6:n=r.sent,n?(console.log("Successfully logged in with:\n",n),t.clearFields(),t.$store.commit("setCurrentUser",n),t.$emit("input",!t.value)):t.failed=!0;case 8:case"end":return r.stop()}}),r)})))()},clearFields:function(){document.getElementById("email").value=""}}},h=d,m=(r("2863"),r("2877")),f=Object(m["a"])(h,c,l,!1,null,"29b43ae0",null),p=f.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"modal"},[r("div",{staticClass:"form"},[e._m(0),r("div",[r("form",[e._m(1),r("p",{directives:[{name:"show",rawName:"v-show",value:e.failed,expression:"failed"}]},[e._v("Registration failed!")])])]),r("div",{staticClass:"buttons"},[r("input",{staticClass:"register",attrs:{type:"submit",value:"Register"},on:{click:e.register}}),r("h4",{staticClass:"cancel",on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("Cancel")])])])])},g=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"title"},[r("h2",[e._v("Create Account")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"input-fields"},[r("input",{attrs:{required:"",type:"email",id:"reg-email",name:"reg-email",placeholder:"email"}}),r("br"),r("input",{attrs:{required:"",type:"text",id:"reg-username",name:"reg-username",placeholder:"username"}}),r("br"),r("input",{attrs:{required:"",type:"password",id:"reg-password",name:"reg-password",minlength:"8",placeholder:"password"}}),r("br")])}],b={name:"Register-Modal",props:{value:{required:!0}},data:function(){return{failed:!1}},methods:{close:function(){this.$emit("input",!this.value)},register:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.preventDefault(),r.next=3,fetch("/rest/v1/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:document.getElementById("reg-email").value,password:document.getElementById("reg-password").value,username:document.getElementById("reg-username").value,userRole:"member",isActive:1})});case 3:return n=r.sent,r.next=6,n.json();case 6:n=r.sent,n?(console.log("Registration success!",n),t.$store.dispatch("fetchCurrentUser"),t.$emit("input",!t.value)):(console.log("Failed registration!"),t.failed=!0);case 8:case"end":return r.stop()}}),r)})))()}}},w=b,_=(r("6de6"),Object(m["a"])(w,v,g,!1,null,"983a0846",null)),C=_.exports,x={components:{SignInModal:p,RegisterModal:C},data:function(){return{signInModalOpen:!1,registerModalOpen:!1}},computed:{currentUser:function(){return this.$store.getters.currentUser||""}},methods:{backToHomePage:function(){"/"!==this.$route.path&&this.$router.push("/")},hideElements:function(e){var t=document.getElementById("sign-in-options"),r=document.getElementById("logout-option");e?(t.style.display="none",r.style.display="block"):(t.style.display="block",r.style.display="none")},showSignInModal:function(){this.signInModalOpen=!this.signInModalOpen},showRegisterModal:function(){this.registerModalOpen=!this.registerModalOpen},goToProfile:function(){this.$router.push({name:"ProfilePage",params:{user:this.currentUser}})},signOutUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/logout",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e.currentUser})});case 2:return r=t.sent,t.next=5,r.json();case 5:r=t.sent,r?(console.log("Logout Succeeded!\n",r),e.hideElements(!1),e.$store.commit("setCurrentUser",null)):console.log("Logout failed!");case 7:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.hideElements(!1)},watch:{currentUser:function(){null===this.$store.getters.currentUser?this.hideElements(!1):this.hideElements(!0)}}},y=x,O=(r("58cf"),Object(m["a"])(y,o,i,!1,null,"1d8a552f",null)),R=O.exports,j=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},k=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"footer"},[r("h4",[e._v("@Batman")])])}],T={data:function(){return{some:1}}},E=T,P=(r("9386"),Object(m["a"])(E,j,k,!1,null,"28980c62",null)),$=P.exports,M={name:"app",components:{Header:R,Footer:$},created:function(){this.$store.dispatch("fetchCurrentUser")}},I=M,S=(r("034f"),Object(m["a"])(I,s,a,!1,null,null,null)),U=S.exports,D=r("8c4f"),N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home-page"},[r("subforum-list")],1)},A=[],L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"subforum-list"},[r("h1",[e._v("Forums")]),r("br"),e._l(e.subforums,(function(e){return r("SubforumListItem",{key:e.id,attrs:{subforum:e}})}))],2)},J=[],B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"subforum-container",on:{click:e.goToSubforum}},[e._m(0),r("div",{staticClass:"title-container"},[r("h3",{staticClass:"subforum-name text"},[e._v(e._s(e.subforum.title))]),r("p",{staticClass:"text"},[e._v(e._s(e.subforum.description))])])])},F=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"icon-img"},[r("span",{staticClass:"material-icons",staticStyle:{"font-size":"5em"}},[e._v("chat")])])}],q={props:["subforum"],methods:{goToSubforum:function(){this.$router.push({name:"SubforumPage",params:{subforum:this.subforum}})}}},H=q,W=(r("2402"),Object(m["a"])(H,B,F,!1,null,"f6b63da6",null)),z=W.exports,Y={components:{SubforumListItem:z},data:function(){return{subforums:[]}},methods:{fetchSubforums:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/subforums");case 2:return r=t.sent,t.next=5,r.json();case 5:e.subforums=t.sent;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchSubforums()}},G=Y,K=(r("497e"),Object(m["a"])(G,L,J,!1,null,"4926c85c",null)),Q=K.exports,V={components:{SubforumList:Q}},X=V,Z=(r("f31d"),Object(m["a"])(X,N,A,!1,null,"a6bf6d56",null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"subforum-page"},[r("div",{staticClass:"top"},[r("div",{staticClass:"info"},[r("h1",{staticClass:"title"},[e._v(e._s(this.$route.params.subforum.title))]),r("h2",[e._v(e._s(this.$route.params.subforum.description))])]),r("div",{staticClass:"create",on:{click:e.createNewThread}},[r("h3",[e._v("Create Thread")])])]),r("hr",{staticStyle:{border:"black",color:"black",width:"60%",height:"2px","background-color":"black"}}),r("ThreadList",{staticClass:"thread-list",attrs:{subforum:this.$route.params.subforum}})],1)},re=[],ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"thread-list"},e._l(e.threads,(function(e,t){return r("ThreadListItem",{key:e.id,attrs:{thread:e,index:t}})})),1)},se=[],ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"thread-container",class:{evenRow:!e.isEvenRow},on:{click:e.goToThreadPage}},[e._m(0),r("div",{staticClass:"user-info"},[r("div",{staticClass:"thread-title"},[r("h1",[e._v(e._s(e.thread.title))])]),r("div",{staticClass:"thread-info"},[r("h4",[r("span",{staticClass:"author",on:{click:e.goToProfile}},[e._v(e._s(e.author.username)+" - "+e._s(e.publishedDate))])])])])])},oe=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-icon"},[r("img",{attrs:{src:"https://image.flaticon.com/icons/png/512/21/21294.png"}})])}],ie={props:["thread","index"],data:function(){return{author:Object}},computed:{publishedDate:function(){var e=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],t=new Date(this.thread.published_time);return e[t.getMonth()]+"  "+t.getDay()+", "+t.getFullYear()},isEvenRow:function(){return this.index%2==0}},methods:{goToThreadPage:function(){this.$router.push({name:"ThreadPage",params:{thread:this.thread}})},goToProfile:function(){this.$router.push({name:"ProfilePage",params:{user:this.author}})},fetchAuthor:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/users/".concat(e.thread.userId));case 2:return r=t.sent,t.next=5,r.json();case 5:e.author=t.sent;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchAuthor()}},ue=ie,ce=(r("f7a1"),Object(m["a"])(ue,ae,oe,!1,null,"744efd34",null)),le=ce.exports,de={props:["subforum"],components:{ThreadListItem:le},data:function(){return{threads:[]}},methods:{fetchAllThreads:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/threads/".concat(e.subforum.id));case 2:return r=t.sent,t.next=5,r.json();case 5:e.threads=t.sent;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchAllThreads()}},he=de,me=(r("a2d5"),Object(m["a"])(he,ne,se,!1,null,"5d0fa8ca",null)),fe=me.exports,pe={components:{ThreadList:fe},methods:{createNewThread:function(){this.$router.push({name:"threadCreation",params:{subforum:this.$route.params.subforum}})}}},ve=pe,ge=(r("5ba4"),Object(m["a"])(ve,te,re,!1,null,"6cf972a6",null)),be=ge.exports,we=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"thread-page"},[r("NewPostModal",{attrs:{threadId:this.thread.id},on:{myEvent:e.fetchPosts},model:{value:e.newpostModalOpen,callback:function(t){e.newpostModalOpen=t},expression:"newpostModalOpen"}}),r("h1",{staticClass:"title"},[e._v(e._s(e.thread.title))]),e.isClosed?r("div",{staticClass:"closed"},[r("h3",{staticClass:"closed-text"},[e._v("Thread Closed!")])]):e._e(),r("PostList",{staticClass:"list",attrs:{posts:this.posts,thread:this.thread}}),e.isClosed?e._e():r("div",{staticClass:"post",on:{click:e.newPost}},[r("h2",[e._v("New Post")])]),e.showCloseThread?r("div",{staticClass:"block"},[r("h3",{on:{click:e.closeThread}},[e._v("Close Thread")])]):e._e()],1)},_e=[],Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"post-list"},e._l(e.posts,(function(e){return r("PostListItem",{key:e.id,attrs:{post:e}})})),1)},xe=[],ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"post-container",class:{warning:e.isWarning}},[r("div",{staticClass:"profile",on:{click:e.goToProfile}},[r("h3",{staticClass:"author"},[e._v(e._s(e.author.username))]),r("img",{attrs:{src:"https://image.flaticon.com/icons/png/512/21/21294.png"}}),r("h4",[e._v(e._s(e.author.userRole))])]),r("div",{staticClass:"main"},[r("div",{staticClass:"published"},[r("h3",[e._v(e._s(e.publishedDate))]),e.isWarning?r("h2",[e._v("Warning!")]):e._e()]),r("div",{staticClass:"message"},[r("h2",[e._v(e._s(e.post.message))])])]),r("div",{staticClass:"remove"},[e.isAuthorized?r("div",{on:{click:e.remove}},[r("h3",[e._v("remove")])]):e._e()])])},Oe=[],Re={props:["post"],data:function(){return{author:Object}},computed:{isWarning:function(){return 1===this.post.warning},isAuthorized:function(){var e=this.$store.getters.currentUser;return!!e&&("admin"===e.userRole||"moderator"===e.userRole)},publishedDate:function(){var e=new Date(this.post.published_time),t=new Date;if(e.getDate()<t.getDate()-7){var r=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];return r[e.getMonth()]+"  "+e.getDay()+", "+e.getFullYear()}var n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=e.getDate()===t.getDate()?"Today":e.getDate()===t.getDate()-1?"Yesterday":n[e.getDay()];return s+" at "+e.getHours()+":"+e.getMinutes()}},methods:{fetchAuthor:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/users/".concat(e.post.userId));case 2:return r=t.sent,t.next=5,r.json();case 5:e.author=t.sent;case 6:case"end":return t.stop()}}),t)})))()},remove:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/posts/".concat(e.post.id),{method:"delete"});case 2:return r=t.sent,t.next=5,r.json();case 5:r=t.sent,console.log(r);case 7:case"end":return t.stop()}}),t)})))()},goToProfile:function(){this.$router.push({name:"ProfilePage",params:{user:this.author}})}},created:function(){this.fetchAuthor()}},je=Re,ke=(r("3a4b"),Object(m["a"])(je,ye,Oe,!1,null,"9749cb2c",null)),Te=ke.exports,Ee={components:{PostListItem:Te},props:["posts"]},Pe=Ee,$e=(r("0c31"),Object(m["a"])(Pe,Ce,xe,!1,null,"fb341186",null)),Me=$e.exports,Ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"modal"},[r("div",{staticClass:"form"},[r("h2",{staticClass:"title"},[e._v("New Post")]),r("form",[e._m(0),e.displayWarningCheckbox?r("div",[r("label",{attrs:{for:"warning"}},[e._v("Warning message")]),r("br"),r("input",{attrs:{type:"checkbox",id:"warning",name:"warning"}})]):e._e(),r("input",{attrs:{type:"submit",value:"Post"},on:{click:e.submit}}),r("button",{on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("Close")])])])])},Se=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"input-fields"},[r("input",{attrs:{required:"",type:"text",id:"message",name:"message",placeholder:"Enter message"}}),r("br")])}],Ue=(r("a9e3"),{name:"newpost-Modal",props:{value:{required:!0},threadId:{type:Number}},computed:{displayWarningCheckbox:function(){var e=this.$store.getters.currentUser;return!!e&&("admin"===e.userRole||"moderator"===e.userRole)}},methods:{close:function(){this.$emit("myEvent","input",!this.value)},submit:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.preventDefault(),n={message:document.getElementById("message").value,userId:t.$store.getters.currentUser.id,threadId:t.threadId,published_time:Date.now()},s=t.$store.getters.currentUser.userRole,"admin"===s||"moderator"===s&&!0===document.getElementById("warning").checked?n.warning=1:n.warning=0,r.next=6,fetch("/rest/v1/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 6:return a=r.sent,r.next=9,a.json();case 9:a=r.sent,console.log(a),t.close();case 12:case"end":return r.stop()}}),r)})))()}}}),De=Ue,Ne=(r("1c67"),Object(m["a"])(De,Ie,Se,!1,null,"7e51ea18",null)),Ae=Ne.exports,Le={components:{PostList:Me,NewPostModal:Ae},props:["thread"],data:function(){return{posts:[],isClosed:!1,newpostModalOpen:!1}},computed:{showCloseThread:function(){var e=this.$store.getters.currentUser;return!!e&&(("moderator"===e.userRole||"admin"===e.userRole)&&!1===this.isClosed)}},methods:{fetchPosts:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/posts/".concat(e.thread.id));case 2:return r=t.sent,t.next=5,r.json();case 5:r=t.sent,e.posts=r,e.newpostModalOpen=!1;case 8:case"end":return t.stop()}}),t)})))()},closeThread:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/threads/".concat(e.thread.id),{method:"PUT"});case 2:return r=t.sent,t.next=5,r.json();case 5:r=t.sent,console.log(r),e.isClosed=!0;case 8:case"end":return t.stop()}}),t)})))()},newPost:function(){this.isClosed||(this.newpostModalOpen=!this.newpostModalOpen)}},created:function(){this.fetchPosts(),this.isClosed=0===this.thread.active},mounted:function(){this.fetchPosts()}},Je=Le,Be=(r("32ea"),Object(m["a"])(Je,we,_e,!1,null,"63cab7c0",null)),Fe=Be.exports,qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"thread-creation"},[e._m(0),r("form",{staticClass:"form"},[r("label",{attrs:{for:"title"}},[e._v("Title")]),r("br"),r("input",{attrs:{required:"",id:"title",type:"text"}}),r("br"),r("label",{attrs:{for:"message"}},[e._v("Message")]),r("br"),r("textarea",{attrs:{required:"",id:"message",type:"text",name:"Text1",cols:"40",rows:"5"}}),r("div",{staticClass:"buttons"},[r("button",{staticClass:"cancel",on:{click:e.goBack}},[e._v("Cancel")]),r("button",{staticClass:"confirm",on:{click:e.createThread}},[e._v("Confirm")])])])])},He=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"head"},[r("h1",{staticClass:"title"},[e._v("Thread Creation")])])}],We={props:["subforum"],methods:{createThread:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.preventDefault(),n={title:document.getElementById("title").value,userId:t.$store.getters.currentUser.id,published_time:Date.now(),subforumId:t.$route.params.subforum.id,active:"active"},console.log("POSTING THREAD",n),null!==n.userId&&void 0!==n.userId){r.next=5;break}return r.abrupt("return");case 5:return r.next=7,fetch("/rest/v1/threads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 7:return s=r.sent,r.next=10,s.json();case 10:s=r.sent,console.log("RESPONSE: ",s.lastInsertRowid),console.log("SOMETAS,",s.lastInsertRowid),t.postInitialPost(n,s),n.id=s.lastInsertRowid,t.$router.push({name:"ThreadPage",params:{thread:n}});case 16:case"end":return r.stop()}}),r)})))()},postInitialPost:function(e,t){var r=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={message:document.getElementById("message").value,userId:r.$store.getters.currentUser.id,threadId:t.lastInsertRowid,published_time:Date.now(),warning:0},console.log("POST:",n),e.next=4,fetch("/rest/v1/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:return s=e.sent,e.next=7,s.json();case 7:s=e.sent,console.log(s);case 9:case"end":return e.stop()}}),e)})))()},goBack:function(){this.$router.push({name:"SubforumPage",params:{subforum:this.subforum}})}}},ze=We,Ye=(r("7993"),Object(m["a"])(ze,qe,He,!1,null,"6cc69c7e",null)),Ge=Ye.exports,Ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"profile-page"},[r("div",{staticClass:"license"},[e._m(0),r("div",{staticClass:"info"},[r("h2",{staticClass:"title"},[e._v(e._s(e.user.username))]),r("h3",[e._v("email: "+e._s(e.user.email))]),r("h3",[e._v("role: "+e._s(e.user.userRole))])])]),e.isAdmin?r("div",[r("div",{staticClass:"delete"},[r("h3",{on:{click:e.deleteUser}},[e._v("DELETE USER")])])]):e._e(),e.isAdmin?r("div",{staticClass:"mode"},[e.profileUserIsModerator?e._e():r("h3",{on:{click:e.makeModerator}},[e._v("Make Moderator")]),e.profileUserIsModerator?r("h3",{on:{click:e.removeModerator}},[e._v("Remove Moderator")]):e._e()]):e._e()])},Qe=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"image"},[r("img",{attrs:{src:"https://image.flaticon.com/icons/png/512/21/21294.png"}})])}],Ve={props:["user"],computed:{isAdmin:function(){return"admin"!==this.user.userRole&&(null!==this.$store.getters.currentUser&&"admin"===this.$store.getters.currentUser.userRole)},profileUserIsModerator:function(){return"admin"!==this.user.userRole&&(null!==this.$store.getters.currentUser&&"moderator"===this.user.userRole)}},methods:{deleteUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("Admin"!==e.user.userRole){t.next=2;break}return t.abrupt("return");case 2:if(e.deleteAllUserPosts(),e.deleteAllUserThreads(),"admin"===e.$store.getters.currentUser.userRole){t.next=6;break}return t.abrupt("return");case 6:return console.log("DELETING USER"),t.next=9,fetch("/rest/v1/users/".concat(e.user.id),{method:"DELETE"});case 9:return r=t.sent,t.next=12,r.json();case 12:r=t.sent,console.log(r),e.goToHomePage();case 15:case"end":return t.stop()}}),t)})))()},deleteAllUserPosts:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/threads/".concat(e.used.id),{method:"DELETE"});case 2:case"end":return t.stop()}}),t)})))()},deleteAllUserThreads:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/posts/".concat(e.used.id),{method:"DELETE"});case 2:case"end":return t.stop()}}),t)})))()},logoutUser:function(){},goToHomePage:function(){this.$router.push("/")},makeModerator:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("Admin"!==e.user.userRole){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("/rest/v1/users/".concat(e.user.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userRole:"moderator"})});case 4:return r=t.sent,t.next=7,r.json();case 7:r=t.sent,console.log(r);case 9:case"end":return t.stop()}}),t)})))()},removeModerator:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/users/".concat(e.user.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userRole:"member"})});case 2:return r=t.sent,t.next=5,r.json();case 5:r=t.sent,console.log(r);case 7:case"end":return t.stop()}}),t)})))()}}},Xe=Ve,Ze=(r("8663"),Object(m["a"])(Xe,Ke,Qe,!1,null,"67404b2e",null)),et=Ze.exports;n["a"].use(D["a"]);var tt=[{path:"/",name:"HomePage",component:ee},{path:"/forum/:subforum",name:"SubforumPage",component:be,props:!0},{path:"/thread/:thread",name:"ThreadPage",component:Fe,props:!0},{path:"/threadCreation/:subforum",name:"threadCreation",component:Ge,props:!0},{path:"/profile/:user",name:"ProfilePage",component:et,props:!0}],rt=new D["a"]({routes:tt,mode:"history",base:"/",scrollBehavior:function(){return{x:0,y:0}}}),nt=rt,st=r("2f62");n["a"].use(st["a"]);var at=new st["a"].Store({state:{currentUser:null},getters:{currentUser:function(e){return e.currentUser}},mutations:{setCurrentUser:function(e,t){e.currentUser=t}},actions:{fetchCurrentUser:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,fetch("/rest/v1/whoami");case 3:return n=t.sent,t.next=6,n.json();case 6:n=t.sent,r("setCurrentUser",n),console.log("Fetched current user: ",n);case 9:case"end":return t.stop()}}),t)})))()},postNewPost:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 2:return r=t.sent,t.next=5,r.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))()}},modules:{}});n["a"].config.productionTip=!1,new n["a"]({store:at,router:nt,render:function(e){return e(U)}}).$mount("#app")},"58cf":function(e,t,r){"use strict";r("1b8b")},"5ba4":function(e,t,r){"use strict";r("8b05")},"607c":function(e,t,r){},"6ac2":function(e,t,r){},"6de6":function(e,t,r){"use strict";r("294a")},7993:function(e,t,r){"use strict";r("fbfd")},"85ec":function(e,t,r){},8663:function(e,t,r){"use strict";r("6ac2")},"8b05":function(e,t,r){},9386:function(e,t,r){"use strict";r("252d")},a28a:function(e,t,r){},a2d5:function(e,t,r){"use strict";r("c216")},c216:function(e,t,r){},c8d8:function(e,t,r){},e30a:function(e,t,r){},e57b:function(e,t,r){},f31d:function(e,t,r){"use strict";r("e30a")},f7a1:function(e,t,r){"use strict";r("e57b")},fbfd:function(e,t,r){}});
//# sourceMappingURL=app.66599311.js.map