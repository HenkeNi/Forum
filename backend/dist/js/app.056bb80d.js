(function(e){function t(t){for(var r,o,i=t[0],u=t[1],c=t[2],d=0,h=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&h.push(n[o][0]),n[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(h.length)h.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],r=!0,i=1;i<s.length;i++){var u=s[i];0!==n[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=s[0]))}return e}var r={},n={app:0},a=[];function o(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=r,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(s,r,function(t){return e[t]}.bind(null,r));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"02aa":function(e,t,s){"use strict";s("a9c1")},"034f":function(e,t,s){"use strict";s("85ec")},"084b":function(e,t,s){},"0e69":function(e,t,s){"use strict";s("f9ba")},"12a9":function(e,t,s){"use strict";s("084b")},1672:function(e,t,s){"use strict";s("84f8")},"186d":function(e,t,s){"use strict";s("f4b0")},"1eff":function(e,t,s){},"252d":function(e,t,s){},"266d":function(e,t){e.exports="data:image/png;base64,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"},"26db":function(e,t,s){"use strict";s("4a06")},"2ba5":function(e,t,s){"use strict";s("9290")},"308b":function(e,t,s){},"384e":function(e,t,s){},4342:function(e,t,s){"use strict";s("ccc8")},"43cb":function(e,t,s){},"4a06":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var r=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("Header"),s("router-view"),s("Footer")],1)},a=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"modals"},[s("SignInModal",{model:{value:e.signInModalOpen,callback:function(t){e.signInModalOpen=t},expression:"signInModalOpen"}}),s("RegisterModal",{model:{value:e.registerModalOpen,callback:function(t){e.registerModalOpen=t},expression:"registerModalOpen"}})],1),s("div",{staticClass:"header-component"},[s("div",{staticClass:"overlay"},[s("h1",{staticClass:"title",on:{click:e.backToHomePage}},[e._v("Superhero Forum")]),s("div",{staticClass:"menu-options"},[s("div",{staticClass:"message-items"},[s("div",{staticClass:"message-new-item"},[e.newMessages&&e.isLoggedIn?s("h4",{staticClass:"new-messages"},[e._v("New")]):e._e()]),e.currentUser?s("h3",{staticClass:"messages",on:{click:e.goToConversations}},[e._v("Messages")]):e._e()]),s("h3",{on:{click:e.goToProfile}},[e._v(e._s(e.currentUser.username))]),s("div",{staticClass:"sign-in",attrs:{id:"sign-in-options"}},[s("h3",{on:{click:e.showSignInModal}},[e._v("Login /")]),s("h3",{on:{click:e.showRegisterModal}},[e._v("Register")])]),s("div",{attrs:{id:"logout-option"}},[s("h3",{on:{click:e.signOutUser}},[e._v("Logout")])])])])]),s("div",{staticClass:"line"})])},i=[],u=(s("d3b7"),s("96cf"),s("1da1")),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"modal"},[s("div",{staticClass:"background",on:{click:e.close}}),s("div",{staticClass:"form"},[s("h2",{staticClass:"title"},[e._v("Sign In")]),s("form",[e._m(0),s("p",{directives:[{name:"show",rawName:"v-show",value:e.failed,expression:"failed"}],staticClass:"warning"},[e._v("Wrong email or password!")])]),s("div",{staticClass:"buttons"},[s("input",{attrs:{type:"submit",value:"Login"},on:{click:e.login}}),s("button",{on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("Close")])])])])},l=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"input-fields"},[s("input",{attrs:{required:"",type:"email",id:"email",name:"email",placeholder:"email"}}),s("br"),s("input",{attrs:{required:"",type:"password",id:"password",name:"password",placeholder:"password"}}),s("br")])}],d={name:"SignIn-Modal",props:{value:{required:!0}},data:function(){return{failed:!1}},methods:{close:function(){this.clearFields(),this.failed=!1,this.$emit("input",!this.value)},login:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.preventDefault(),s.next=3,t.$store.dispatch("signInUser",{email:document.getElementById("email").value,password:document.getElementById("password").value});case 3:r=s.sent,r?t.close():(console.log("Login attempt failed!"),t.failed=!0);case 5:case"end":return s.stop()}}),s)})))()},clearFields:function(){document.getElementById("email").value="",document.getElementById("password").value=""},hello:function(){console.log("HELLO")}}},h=d,m=(s("7467"),s("2877")),f=Object(m["a"])(h,c,l,!1,null,"09f1f9ff",null),p=f.exports,v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"modal"},[s("div",{staticClass:"background",on:{click:e.close}}),s("div",{staticClass:"form"},[e._m(0),s("div",[s("form",[e._m(1),s("p",{directives:[{name:"show",rawName:"v-show",value:e.failed,expression:"failed"}]},[e._v("Registration failed!")]),s("div",{staticClass:"buttons"},[s("button",{staticClass:"register",attrs:{type:"submit",value:"Register"},on:{click:e.register}},[e._v("Register")]),s("h4",{staticClass:"cancel",on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("Cancel")])])])])])])},g=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"title"},[s("h2",[e._v("Create Account")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"input-fields"},[s("input",{attrs:{type:"email",id:"reg-email",name:"reg-email",placeholder:"email",required:""}}),s("br"),s("input",{attrs:{type:"text",id:"reg-username",name:"reg-username",placeholder:"username",required:""}}),s("br"),s("input",{attrs:{type:"password",id:"reg-password",name:"reg-password",minlength:"8",placeholder:"password",required:""}}),s("br")])}],b={name:"Register-Modal",props:{value:{required:!0}},data:function(){return{failed:!1}},methods:{close:function(){this.clearFields(),this.failed=!1,this.$emit("input",!this.value)},register:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.preventDefault(),s.next=3,t.$store.dispatch("registerUser",{email:document.getElementById("reg-email").value,password:document.getElementById("reg-password").value,username:document.getElementById("reg-username").value,registrationDate:Date.now()});case 3:r=s.sent,r.error&&(t.failed=!0),r&&t.close();case 6:case"end":return s.stop()}}),s)})))()},clearFields:function(){document.getElementById("reg-email").value="",document.getElementById("reg-password").value="",document.getElementById("reg-username").value=""}}},C=b,w=(s("6783"),Object(m["a"])(C,v,g,!1,null,"0e51daf6",null)),A=w.exports,x={components:{SignInModal:p,RegisterModal:A},data:function(){return{signInModalOpen:!1,registerModalOpen:!1,newMessages:!1}},computed:{currentUser:function(){return this.$store.getters.currentUser||""},isLoggedIn:function(){return null!==this.$store.getters.currentUser}},methods:{backToHomePage:function(){"/"!==this.$route.path&&this.$router.push("/")},hideElements:function(e){var t=document.getElementById("sign-in-options"),s=document.getElementById("logout-option");e?(t.style.display="none",s.style.display="block"):(t.style.display="block",s.style.display="none")},showSignInModal:function(){this.signInModalOpen=!this.signInModalOpen},showRegisterModal:function(){this.registerModalOpen=!this.registerModalOpen},goToProfile:function(){"/"!==this.$route.path&&this.$router.push("/"),this.$router.push({name:"ProfilePage",params:{user:this.currentUser}})},goToConversations:function(){this.$router.push({name:"ConversationsPage",params:{user:this.currentUser}})},signOutUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/logout",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e.currentUser})});case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,s&&(e.hideElements(!1),e.$store.commit("setCurrentUser",null),"/"!==e.$route.path&&e.$router.push("/"));case 7:case"end":return t.stop()}}),t)})))()},getNewMessagesCount:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.currentUser){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("/rest/v1/messages/all/".concat(e.currentUser.id));case 4:return s=t.sent,t.next=7,s.json();case 7:s=t.sent,s[0]["COUNT(unread)"]>0&&(console.log("NEW MESSAGES"),e.newMessages=!0);case 9:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.hideElements(!1),this.getNewMessagesCount()},watch:{currentUser:function(){null===this.$store.getters.currentUser?this.hideElements(!1):this.hideElements(!0),null!==this.$store.getters.currentUser&&this.getNewMessagesCount()}}},_=x,I=(s("809c"),Object(m["a"])(_,o,i,!1,null,"fdae01f2",null)),E=I.exports,O=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},k=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"footer"},[s("h4",[e._v("@Batman")])])}],R={data:function(){return{some:1}}},P=R,j=(s("9386"),Object(m["a"])(P,O,k,!1,null,"28980c62",null)),y=j.exports,U={name:"app",components:{Header:E,Footer:y},created:function(){this.$store.dispatch("fetchCurrentUser")}},T=U,N=(s("034f"),Object(m["a"])(T,n,a,!1,null,null,null)),D=N.exports,M=s("8c4f"),S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home-page"},[s("subforum-list")],1)},B=[],Q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"subforum-list"},[e._m(0),e._l(e.subforums,(function(e){return s("SubforumListItem",{key:e.id,attrs:{subforum:e}})}))],2)},$=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"title"},[s("h1",[e._v("Forums")])])}],q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"subforum-container",on:{click:e.goToSubforum}},[e._m(0),s("div",{staticClass:"info"},[s("div",{staticClass:"title-container"},[s("h3",{staticClass:"subforum-name text"},[e._v(e._s(e.subforum.title))]),s("p",{staticClass:"text"},[e._v(e._s(e.subforum.description))])]),s("div",{staticClass:"threads"},[s("p",{staticClass:"threads-title"},[e._v("Threads")]),s("p",{staticClass:"amount"},[e._v(e._s(this.threadsAmount))])])])])},L=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"icon-img"},[s("span",{staticClass:"material-icons",staticStyle:{"font-size":"5em"}},[e._v("chat")])])}],G={props:["subforum"],data:function(){return{threadsAmount:0}},methods:{goToSubforum:function(){this.$router.push({name:"SubforumPage",params:{subforum:this.subforum}})},fetchThreadCount:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/threads/count/".concat(e.subforum.id));case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,e.threadsAmount=s[0]["COUNT(subforumId)"];case 7:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchThreadCount()}},F=G,J=(s("9268"),Object(m["a"])(F,q,L,!1,null,"ade0a410",null)),z=J.exports,X={components:{SubforumListItem:z},data:function(){return{subforums:[]}},methods:{fetchSubforums:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/subforums");case 2:return s=t.sent,t.next=5,s.json();case 5:e.subforums=t.sent;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchSubforums()}},K=X,Y=(s("7087"),Object(m["a"])(K,Q,$,!1,null,"0bd5c966",null)),V=Y.exports,Z={components:{SubforumList:V}},W=Z,H=(s("0e69"),Object(m["a"])(W,S,B,!1,null,"60a6d85d",null)),ee=H.exports,te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"subforum-page"},[s("div",{staticClass:"top"},[s("div",{staticClass:"info"},[s("h1",{staticClass:"title"},[e._v(e._s(this.$route.params.subforum.title))]),s("h2",[e._v(e._s(this.$route.params.subforum.description))])]),s("div",{staticClass:"create"},[s("h3",{on:{click:e.createNewThread}},[e._v("Create Thread")])])]),s("hr",{staticStyle:{border:"black",color:"black",width:"60%",height:"2px","background-color":"black"}}),s("ThreadList",{staticClass:"thread-list",attrs:{subforum:this.$route.params.subforum}})],1)},se=[],re=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"thread-list"},e._l(e.threads,(function(e,t){return s("ThreadListItem",{key:e.id,attrs:{thread:e,index:t}})})),1)},ne=[],ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"thread-container",class:{evenRow:!e.isEvenRow},on:{click:e.goToThreadPage}},[s("div",{staticClass:"container",class:{nailed:e.isNailed}},[s("div",{staticClass:"left"},[e.isNailed?s("div",{staticClass:"user-icon"},[s("span",{staticClass:"material-icons",staticStyle:{"font-size":"3.4em"}},[e._v("error_outline")])]):s("div",{staticClass:"user-icon"},[s("span",{staticClass:"material-icons",staticStyle:{"font-size":"3.4em"}},[e._v("folder")])]),s("div",{staticClass:"user-info"},[s("div",{staticClass:"title-close"},[s("div",{staticClass:"thread-title"},[s("h2",{staticClass:"title"},[e._v(e._s(e.thread.title))])])]),s("div",{staticClass:"thread-info"},[s("h4",[s("span",{staticClass:"author",on:{click:e.goToProfile}},[e._v(e._s(e.author.username)+" - "+e._s(e.publishedDate))])])])])]),s("div",{staticClass:"closed"},[e.isClosed?s("h2",[e._v("closed")]):e._e(),s("div",{staticClass:"amount"},[s("p",[e._v("Posts")]),s("p",[e._v(e._s(e.postsAmount))])])])])])},oe=[],ie={props:["thread","index"],data:function(){return{author:Object,postsAmount:0}},computed:{publishedDate:function(){var e=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],t=new Date(this.thread.published_time);return e[t.getMonth()]+"  "+t.getDay()+", "+t.getFullYear()},isEvenRow:function(){return this.index%2===0},isClosed:function(){return 0===this.thread.active},isNailed:function(){return 1===this.thread.isNailed}},methods:{goToThreadPage:function(){this.$router.push({name:"ThreadPage",params:{thread:this.thread}})},goToProfile:function(){this.$router.push({name:"ProfilePage",params:{user:this.author}})},fetchAuthor:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/users/".concat(e.thread.userId));case 2:return s=t.sent,t.next=5,s.json();case 5:e.author=t.sent;case 6:case"end":return t.stop()}}),t)})))()},fetchPostAmount:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/posts/count/".concat(e.thread.id));case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,e.postsAmount=s[0]["COUNT(threadId)"];case 7:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchAuthor(),this.fetchPostAmount()}},ue=ie,ce=(s("5b0b"),Object(m["a"])(ue,ae,oe,!1,null,"66bb52a4",null)),le=ce.exports,de={props:["subforum"],components:{ThreadListItem:le},data:function(){return{threads:[]}},methods:{fetchAllThreads:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/threads/".concat(e.subforum.id));case 2:return s=t.sent,t.next=5,s.json();case 5:e.threads=t.sent;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchAllThreads()}},he=de,me=(s("8512"),Object(m["a"])(he,re,ne,!1,null,"56e6f069",null)),fe=me.exports,pe={components:{ThreadList:fe},computed:{isLoggedIn:function(){return null!==this.$store.getters.currentUser}},methods:{createNewThread:function(){this.isLoggedIn&&this.$router.push({name:"threadCreation",params:{subforum:this.$route.params.subforum}})}}},ve=pe,ge=(s("12a9"),Object(m["a"])(ve,te,se,!1,null,"128633cd",null)),be=ge.exports,Ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"thread-page",attrs:{id:"thread-page"}},[s("NewPostModal",{attrs:{threadId:this.thread.id},on:{reload:e.fetchPosts,myEvent:e.modalClosed},model:{value:e.newpostModalOpen,callback:function(t){e.newpostModalOpen=t},expression:"newpostModalOpen"}}),s("div",{staticClass:"page-head"},[s("h1",{staticClass:"title",class:{showclose:e.showCloseThread}},[e._v(e._s(e.thread.title))]),e.showCloseThread?s("div",{staticClass:"admin-options"},[s("div",{staticClass:"opt-close tab"},[s("h2",{on:{click:e.closeThread}},[e._v("Close Thread")])]),s("div",{staticClass:"opt-remove tab"},[s("h2",{on:{click:e.removeThread}},[e._v("Remove Thread")])])]):e._e()]),e.threadClosed?s("div",{staticClass:"closed"},[s("h3",{staticClass:"closed-text"},[e._v("Thread Closed!")])]):e._e(),s("PostList",{staticClass:"list",attrs:{posts:this.posts,thread:this.thread}}),s("div",{staticClass:"buttons"},[e.threadClosed?e._e():s("div",{staticClass:"post",on:{click:e.newPost}},[s("h2",[e._v("New Post")])])]),e.shouldPost?s("div",{staticClass:"newpost",attrs:{id:"scroll-post"}},[s("NewPost",{attrs:{id:"tst",quote:e.quotedPost,threadId:this.thread.id}})],1):e._e()],1)},we=[],Ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"post-list"},e._l(e.posts,(function(t){return s("PostListItem",{key:t.id,attrs:{post:t,thread:e.thread}})})),1)},xe=[],_e=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"post-container",class:{warning:e.isWarning}},[r("div",{staticClass:"profile",on:{click:e.goToProfile}},[r("h3",{staticClass:"author"},[e._v(e._s(e.author.username))]),r("img",{staticClass:"image",attrs:{src:e.author.imgUrl}}),r("h4",[e._v(e._s(e.author.userRole))]),r("h5",[e._v("Registration:")]),r("h5",[e._v(e._s(this.registrationDate))]),r("h5",[e._v("Posts: "+e._s(this.postsAmount))])]),r("div",{staticClass:"main"},[r("div",{staticClass:"top"},[r("div",{staticClass:"published"},[r("h3",[e._v(e._s(e.publishedDate))])]),r("div",[e.isWarning?r("h2",[e._v("Warning!")]):e._e()]),r("div",{staticClass:"options"},[e.isLoggedIn?r("div",{staticClass:"quote",on:{click:e.quoteUser}},[r("img",{staticClass:"quote-img",attrs:{src:s("266d")}})]):e._e(),e.isEditable?r("div",{staticClass:"edit",on:{click:e.edit}},[r("h3",[e._v("Edit")])]):e._e(),r("div",{staticClass:"remove"},[e.isAuthorized?r("div",{on:{click:e.remove}},[r("h3",[e._v("remove")])]):e._e()])])]),r("div",{staticClass:"message"},[this.quote?r("div",[r("QuoteItem",{attrs:{quote:e.quote}})],1):e._e(),e.shouldEdit?r("div",[r("EditPost",{attrs:{post:e.post}})],1):e._e(),e.shouldEdit?e._e():r("div",[e.isEdited?r("p",{staticClass:"has-edited"},[e._v("(Edited)")]):e._e(),r("h2",{staticClass:"main-text"},[e._v(e._s(e.post.message))])])])])])},Ie=[],Ee=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("textarea",{staticClass:"textarea",attrs:{id:"edit-message",type:"text",name:"edit-message",placeholder:"Enter new message...",cols:"40",rows:"5",required:""}}),s("div",[s("button",{on:{click:e.updateMessage}},[e._v("Update")]),s("button",{on:{click:e.cancel}},[e._v("Cancel")])])])},Oe=[],ke={props:["post"],methods:{updateMessage:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/posts/".concat(e.post.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.post.id,message:document.getElementById("edit-message").value,userId:e.post.userId,isEdited:1})});case 2:e.$parent.fetchPostsInParent(),e.cancel();case 4:case"end":return t.stop()}}),t)})))()},cancel:function(){document.getElementById("edit-message").value="",this.$parent.shouldEdit=!1}}},Re=ke,Pe=Object(m["a"])(Re,Ee,Oe,!1,null,"fd893470",null),je=Pe.exports,ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"quote-container"},[s("h4",{staticClass:"quote-header"},[e._v(e._s(e.publishedDate)+" - "+e._s(this.quotedAuthor.username)+" wrote:")]),s("div",[s("h3",[e._v(e._s(this.quote.message))]),1===this.quote.isEdited?s("h4",[e._v("(edited)")]):e._e()])])},Ue=[],Te={props:["quote"],data:function(){return{quotedAuthor:Object}},computed:{publishedDate:function(){var e=new Date(this.quote.published_time),t=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];return e.getDay()+" "+t[e.getMonth()]+", "+e.getFullYear()+" at "+e.getHours()+":"+e.getMinutes()}},methods:{fetchQuoteAuthor:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/users/".concat(e.quote.userId));case 2:return s=t.sent,t.next=5,s.json();case 5:e.quotedAuthor=t.sent;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchQuoteAuthor()}},Ne=Te,De=(s("90b2"),Object(m["a"])(Ne,ye,Ue,!1,null,"096a355a",null)),Me=De.exports,Se={components:{EditPost:je,QuoteItem:Me},props:["post","thread"],data:function(){return{author:Object,shouldEdit:!1,quote:null,postsAmount:0}},computed:{isWarning:function(){return 1===this.post.warning},isAuthorized:function(){var e=this.$store.getters.currentUser;return!!e&&("admin"===e.userRole||"moderator"===e.userRole)},isLoggedIn:function(){return null!==this.$store.getters.currentUser},isEditable:function(){return 1===this.thread.active&&(this.isAuthorized||null!==this.$store.getters.currentUser&&this.$store.getters.currentUser.id===this.author.id)},isEdited:function(){return 1===this.post.isEdited},registrationDate:function(){var e=new Date(this.author.registrationDate);return e.getDay()+1+"/"+e.getMonth()+"1/"+e.getFullYear()},publishedDate:function(){var e=new Date(this.post.published_time),t=new Date;if(e.getDate()<t.getDate()-7){var s=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];return s[e.getMonth()]+"  "+e.getDay()+", "+e.getFullYear()}var r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],n=e.getDate()===t.getDate()?"Today":e.getDate()===t.getDate()-1?"Yesterday":r[e.getDay()];return n+" at "+e.getHours()+":"+e.getMinutes()}},methods:{fetchAuthor:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/users/".concat(e.post.userId));case 2:return s=t.sent,t.next=5,s.json();case 5:e.author=t.sent;case 6:case"end":return t.stop()}}),t)})))()},remove:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/posts/".concat(e.post.id),{method:"delete"});case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,console.log(s),e.fetchPostsInParent();case 8:case"end":return t.stop()}}),t)})))()},edit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.shouldEdit=!e.shouldEdit;case 1:case"end":return t.stop()}}),t)})))()},getPossibleQuote:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/quotes/".concat(e.post.id));case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,s[0]&&(e.quote=s[0]);case 7:case"end":return t.stop()}}),t)})))()},getNumberOfPostsByUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/posts/user/count/".concat(e.post.userId));case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,e.author.postsAmount=s[0]["COUNT(userId)"],console.log("thi",e.author),e.postsAmount=s[0]["COUNT(userId)"];case 9:case"end":return t.stop()}}),t)})))()},fetchPostsInParent:function(){this.$parent.reload()},goToProfile:function(){this.$router.push({name:"ProfilePage",params:{user:this.author}})},quoteUser:function(){null!==this.$store.getters.currentUser?this.$parent.passQuotedPost(this.post):alert("Login to quote a message!")}},created:function(){this.fetchAuthor(),this.getNumberOfPostsByUser(),this.getPossibleQuote()}},Be=Se,Qe=(s("f0e4"),Object(m["a"])(Be,_e,Ie,!1,null,"67bd086e",null)),$e=Qe.exports,qe={components:{PostListItem:$e},props:["posts","thread"],methods:{reload:function(){this.$parent.fetchPosts()},passQuotedPost:function(e){this.$parent.setQuotedPost(e)}}},Le=qe,Ge=(s("26db"),Object(m["a"])(Le,Ae,xe,!1,null,"ddfebe14",null)),Fe=Ge.exports,Je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"modal"},[s("div",{staticClass:"form"},[s("h2",{staticClass:"title"},[e._v("New Post")]),s("form",[e._m(0),e.showCheckbox?s("div",[s("label",{attrs:{for:"warning"}},[e._v("Warning message")]),s("br"),s("input",{attrs:{type:"checkbox",id:"warning",name:"warning"}})]):e._e(),s("input",{attrs:{type:"submit",value:"Post"},on:{click:e.submit}}),s("button",{on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("Close")])])])])},ze=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"input-fields"},[s("input",{attrs:{required:"",type:"text",id:"message",name:"message",placeholder:"Enter message"}}),s("br")])}],Xe=(s("a9e3"),{name:"newpost-Modal",props:{value:{required:!0},threadId:{type:Number}},computed:{showCheckbox:function(){var e=this.$store.getters.currentUser;return!!e&&("admin"===e.userRole||"moderator"===e.userRole)}},methods:{close:function(){document.getElementById("message").value="",this.$emit("myEvent","input",!this.value)},submit:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.preventDefault(),r={message:document.getElementById("message").value,userId:t.$store.getters.currentUser.id,threadId:t.threadId,published_time:Date.now(),warning:0},t.showCheckbox&&!0===document.getElementById("warning").checked&&(r.warning=1),s.next=5,fetch("/rest/v1/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:return n=s.sent,s.next=8,n.json();case 8:n=s.sent,console.log(n),t.close();case 11:case"end":return s.stop()}}),s)})))()}}}),Ke=Xe,Ye=(s("9f17"),Object(m["a"])(Ke,Je,ze,!1,null,"7efe559e",null)),Ve=Ye.exports,Ze=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"post-container"},[s("form",{staticClass:"post-form",attrs:{id:"post-form"}},[null!==this.quotedPost?s("div",{staticClass:"remove-quote"},[s("h4",{on:{click:function(t){return t.preventDefault(),e.removeQuote(t)}}},[e._v("remove")])]):e._e(),null!==this.quotedPost?s("div",{staticClass:"quoted-text"},[s("div",{staticClass:"quote-head"},[s("h3",[e._v("at dd-mm-yy at hh:mm "+e._s(this.quotedAuthor.username)+" wrote:")])]),s("div",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:this.quotedPost.message,expression:"this.quotedPost.message"}],staticClass:"quote-textarea",attrs:{id:"quote-message",type:"text",cols:"40",rows:"5"},domProps:{value:this.quotedPost.message},on:{input:function(t){t.target.composing||e.$set(this.quotedPost,"message",t.target.value)}}})])]):e._e(),e._m(0),e.showCheckbox?s("div",{staticClass:"checkbox"},[e._m(1)]):e._e(),s("div",{staticClass:"buttons"},[s("input",{staticClass:"send",attrs:{type:"submit",value:"Post"},on:{click:function(t){return t.preventDefault(),e.createPost(t)}}}),s("button",{staticClass:"cancel",on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("Close")])])])])},We=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"input-fields"},[s("textarea",{staticClass:"textarea",attrs:{id:"post-message",type:"text",name:"post-message",placeholder:"Enter message...",cols:"40",rows:"5",required:""}}),s("br")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",{staticClass:"box"},[e._v(" Warning message: "),s("input",{staticClass:"box",attrs:{type:"checkbox",id:"post-warning",name:"post-warning"}})])}],He={props:["quote","threadId"],data:function(){return{quotedAuthor:Object,quotedPost:null,test:document.getElementById("post-cont")}},computed:{showCheckbox:function(){var e=this.$store.getters.currentUser;return!!e&&("admin"===e.userRole||"moderator"===e.userRole)}},methods:{close:function(){this.$parent.shouldPost=!1},removeQuote:function(){console.log("remove quote"),this.quotedPost=null,this.$parent.clearQuotePost()},postQuotedText:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r,n,a,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return console.log("post quote"),r=document.getElementById("quote-message").value,n=r!==t.quotedPost.message?1:0,a={message:r,userId:t.quotedAuthor.id,postId:e,published_time:t.quotedPost.published_time,isEdited:n},console.log(a),s.next=7,fetch("/rest/v1/quotes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 7:return o=s.sent,s.next=10,o.json();case 10:o=s.sent,console.log(o);case 12:case"end":return s.stop()}}),s)})))()},getQuotedAuthor:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/users/".concat(e.quote.userId));case 2:return s=t.sent,t.next=5,s.json();case 5:e.quotedAuthor=t.sent;case 6:case"end":return t.stop()}}),t)})))()},createPost:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.preventDefault(),""!==document.getElementById("post-message").value){s.next=3;break}return s.abrupt("return");case 3:return r={message:document.getElementById("post-message").value,userId:t.$store.getters.currentUser.id,threadId:t.threadId,published_time:Date.now(),warning:0},t.showCheckbox&&!0===document.getElementById("post-warning").checked&&(r.warning=1),s.next=7,fetch("/rest/v1/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 7:return n=s.sent,s.next=10,n.json();case 10:n=s.sent,console.log(n),null!==t.quotedPost&&t.postQuotedText(n.lastInsertRowid),t.$parent.fetchPosts(),t.close();case 15:case"end":return s.stop()}}),s)})))()}},created:function(){this.quote&&(this.quotedPost=this.quote,this.getQuotedAuthor())},mounted:function(){this.$nextTick((function(){return document.getElementById("post-form").scrollIntoView()}))}},et=He,tt=(s("745b"),Object(m["a"])(et,Ze,We,!1,null,"1c2274ee",null)),st=tt.exports,rt={components:{PostList:Fe,NewPostModal:Ve,NewPost:st},props:["thread"],data:function(){return{posts:[],threadClosed:!1,newpostModalOpen:!1,shouldPost:!1,quotedPost:null}},computed:{showCloseThread:function(){var e=this.$store.getters.currentUser;return!!e&&(("moderator"===e.userRole||"admin"===e.userRole)&&!1===this.threadClosed)},isLoggedIn:function(){return null!==this.$store.getters.currentUser}},methods:{modalClosed:function(){this.newpostModalOpen=!1,this.fetchPosts()},clearQuotePost:function(){this.quotedPost=null},fetchPosts:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/posts/".concat(e.thread.id));case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,e.posts=s;case 7:case"end":return t.stop()}}),t)})))()},closeThread:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/threads/".concat(e.thread.id),{method:"PUT"});case 2:e.threadClosed=!0;case 3:case"end":return t.stop()}}),t)})))()},removeThread:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/threads/".concat(e.thread.id),{method:"DELETE"});case 2:e.$router.push("/");case 3:case"end":return t.stop()}}),t)})))()},setQuotedPost:function(e){!1===this.threadClosed&&(this.quotedPost=e,this.shouldPost=!0)},newPost:function(){this.isLoggedIn?(this.shouldPost=!this.shouldPost,this.scrollToEnd()):alert("Login to post a message!")},scrollToEnd:function(){}},created:function(){this.fetchPosts(),this.threadClosed=0===this.thread.active},mounted:function(){this.fetchPosts()},watch:{posts:function(){0===this.posts.length&&this.removeThread()},shouldPost:function(){!1===this.shouldPost&&this.clearQuotePost()}}},nt=rt,at=(s("c479"),Object(m["a"])(nt,Ce,we,!1,null,"3925ba38",null)),ot=at.exports,it=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"thread-creation"},[e._m(0),s("form",{staticClass:"form"},[s("label",{attrs:{for:"title"}},[e._v("Title")]),s("br"),s("input",{attrs:{required:"",id:"title",type:"text"}}),s("br"),e.isModeratorOrAdmin?s("div",[e._m(1)]):e._e(),s("label",{attrs:{for:"message"}},[e._v("Message")]),s("br"),s("textarea",{attrs:{required:"",id:"message",type:"text",name:"Text1",cols:"40",rows:"5"}}),s("div",{staticClass:"buttons"},[s("button",{staticClass:"cancel",on:{click:e.goBack}},[e._v("Cancel")]),s("button",{staticClass:"confirm",on:{click:e.createThread}},[e._v("Confirm")])])])])},ut=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"head"},[s("h1",{staticClass:"title"},[e._v("Thread Creation")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",[e._v("Make thread nailed: "),s("input",{attrs:{id:"nailed-check",type:"checkbox"}})])}],ct={props:["subforum"],computed:{isModeratorOrAdmin:function(){var e=this.$store.getters.currentUser;return!!e&&("admin"===e.userRole||"moderator"===e.userRole)}},methods:{createThread:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.preventDefault(),""!==document.getElementById("title").value&&""!==document.getElementById("message")){s.next=3;break}return s.abrupt("return");case 3:if(r={title:document.getElementById("title").value,userId:t.$store.getters.currentUser.id,published_time:Date.now(),subforumId:t.$route.params.subforum.id},null!==r.userId&&void 0!==r.userId){s.next=6;break}return s.abrupt("return");case 6:return t.isModeratorOrAdmin&&!0===document.getElementById("nailed-check").checked&&(r.isNailed=1),s.next=9,fetch("/rest/v1/threads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 9:return n=s.sent,s.next=12,n.json();case 12:n=s.sent,t.postInitialPost(r,n),r.id=n.lastInsertRowid,t.$router.push({name:"ThreadPage",params:{thread:r}});case 16:case"end":return s.stop()}}),s)})))()},postInitialPost:function(e,t){var s=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={message:document.getElementById("message").value,userId:s.$store.getters.currentUser.id,threadId:t.lastInsertRowid,published_time:Date.now(),warning:0},console.log("POST:",r),e.next=4,fetch("/rest/v1/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:return n=e.sent,e.next=7,n.json();case 7:n=e.sent,console.log(n);case 9:case"end":return e.stop()}}),e)})))()},goBack:function(){this.$router.push({name:"SubforumPage",params:{subforum:this.subforum}})}}},lt=ct,dt=(s("02aa"),Object(m["a"])(lt,it,ut,!1,null,"f25ab042",null)),ht=dt.exports,mt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"profile-page"},[s("License",{attrs:{user:e.user}}),s("div",[!e.ownProfile&&e.isLoggedIn?s("h2",{staticClass:"message",on:{click:e.goToMessagePage}},[e._v("Send PM")]):e._e()]),e.showOptions?s("div",[s("div",[s("div",{staticClass:"delete"},[s("h3",{on:{click:e.deleteUser}},[e._v("DELETE USER")])])]),s("div",{staticClass:"mode"},[e.isModerator?e._e():s("h3",{on:{click:e.makeModerator}},[e._v("Make Moderator")]),e.isModerator?s("h3",{on:{click:e.removeModerator}},[e._v("Remove Moderator")]):e._e()])]):e._e(),e.isAdminProfile?s("div",{staticClass:"list"},[s("h2",[e._v("Admin options:")]),s("h2",{staticClass:"list-route",on:{click:function(t){return t.preventDefault(),e.goToUserList(t)}}},[e._v("See list of user")])]):e._e()],1)},ft=[],pt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"license"},[s("div",{staticClass:"image"},[s("img",{attrs:{src:e.user.imgUrl}}),e.ownProfile?s("div",[s("p",{staticClass:"add",on:{click:function(t){e.showUrl=!e.showUrl}}},[e._v("+ add image")]),e.showUrl?s("div",{staticClass:"url-container"},[s("input",{attrs:{id:"image-url",placeholder:"image url..",type:"text"}}),s("button",{on:{click:e.addProfileImage}},[e._v("Update")])]):e._e()]):e._e()]),s("div",{staticClass:"info"},[s("div",{staticClass:"head"},[s("h2",{staticClass:"username"},[e._v(e._s(e.user.username))])]),s("h3",{staticClass:"email"},[e._v("email: "+e._s(e.user.email))]),s("h3",{staticClass:"role"},[e._v("role: "+e._s(e.user.userRole))]),s("h3",[e._v("Registration: "+e._s(this.registrationDate))]),s("h3",[e._v("Posts: "+e._s(this.user.numberOfPosts))])])])},vt=[],gt={props:["user"],data:function(){return{showUrl:!1}},computed:{ownProfile:function(){return null!==this.$store.getters.currentUser&&this.$store.getters.currentUser.id===this.user.id},registrationDate:function(){var e=new Date(this.user.registrationDate);return e.getDay()+1+"/"+e.getMonth()+"1/"+e.getFullYear()}},methods:{addProfileImage:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=document.getElementById("image-url").value,""!==s){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,fetch("/rest/v1/users/".concat(e.$store.getters.currentUser.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({imgUrl:s})});case 5:r=t.sent,e.user.imgUrl=s,s="",console.log(r);case 9:case"end":return t.stop()}}),t)})))()},getNumberOfPostsByUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/posts/user/count/".concat(e.user.id));case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,e.user.numberOfPosts=s[0]["COUNT(userId)"];case 7:case"end":return t.stop()}}),t)})))()}},created:function(){this.getNumberOfPostsByUser()}},bt=gt,Ct=(s("6e22"),Object(m["a"])(bt,pt,vt,!1,null,"8ded2e96",null)),wt=Ct.exports,At={components:{License:wt},props:["user"],computed:{ownProfile:function(){return null!==this.$store.getters.currentUser&&this.$store.getters.currentUser.id===this.user.id},isLoggedIn:function(){return null!==this.$store.getters.currentUser},showOptions:function(){return"admin"!==this.user.userRole&&(null!==this.$store.getters.currentUser&&"admin"===this.$store.getters.currentUser.userRole)},isModerator:function(){return null!==this.user.userRole&&"moderator"===this.user.userRole},isAdminProfile:function(){return null!==this.user.userRole&&"admin"===this.user.userRole&&null!==this.$store.getters.currentUser&&"admin"===this.$store.getters.currentUser.userRole}},methods:{deleteUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/users/".concat(e.user.id),{method:"DELETE"});case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,console.log(s),e.goToHomePage();case 8:case"end":return t.stop()}}),t)})))()},goToHomePage:function(){this.$router.push("/")},goToMessagePage:function(){this.$router.push({name:"MessagePage",params:{user:this.user}})},goToUserList:function(){this.$router.push("/userlistpage")},giveUserWarning:function(){return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},makeModerator:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("Admin"!==e.user.userRole){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("/rest/v1/users/".concat(e.user.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userRole:"moderator"})});case 4:return s=t.sent,t.next=7,s.json();case 7:s=t.sent,console.log(s),s&&(e.user.userRole="moderator");case 10:case"end":return t.stop()}}),t)})))()},removeModerator:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/users/".concat(e.user.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userRole:"member"})});case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,console.log(s),s&&(e.user.userRole="member");case 8:case"end":return t.stop()}}),t)})))()}}},xt=At,_t=(s("1672"),Object(m["a"])(xt,mt,ft,!1,null,"632ebe30",null)),It=_t.exports,Et=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("div",{staticClass:"send"},[s("div",{staticClass:"other-user"},[s("h2",[e._v("Conversation with")]),s("h2",{staticClass:"name",on:{click:function(t){return t.preventDefault(),e.goToProfile(t)}}},[e._v(e._s(e.user.username))])]),s("textarea",{staticClass:"textarea",attrs:{id:"post-message",type:"text",name:"post-message",placeholder:"Enter new message...",cols:"40",rows:"5",required:""}}),s("p",[e._v("Send a message to "+e._s(e.user.username)+e._s(e.user.id))]),s("button",{on:{click:e.sendMessage}},[e._v("SEND")])]),null!=e.conversationsID?s("div",{staticClass:"list"},[s("MessageList",{attrs:{messages:e.messages}})],1):e._e()])},Ot=[],kt=(s("4de4"),s("caad"),s("d81d"),s("25f0"),s("2532"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"list"},[s("h2",[e._v("Conversation:")]),e._l(e.messages,(function(e){return s("MessageListItem",{key:e.id,attrs:{message:e}})})),s("hr",{staticClass:"end"})],2)}),Rt=[],Pt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"large-container",class:{own:e.isOwnMessage}},[s("div",[s("div",{staticClass:"container"},[e.isOwnMessage?s("h3",{staticClass:"delete",on:{click:e.deletePost}},[e._v("X")]):e._e(),s("h2",{staticClass:"message"},[e._v(e._s(e.message.text))]),s("p",[e._v("writen by: "+e._s(this.author.username))]),e.isOwnMessage&&1===e.message.unread?s("p",{staticClass:"read-status"},[e._v("(unread)")]):e._e()]),e._m(0)])])},jt=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bottom"},[s("div",{staticClass:"arrow"})])}],yt={props:["message"],data:function(){return{author:Object}},computed:{isOwnMessage:function(){return this.$store.getters.currentUser.id===this.message.senderId}},methods:{fetchAuthor:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/users/".concat(e.message.senderId));case 2:return s=t.sent,t.next=5,s.json();case 5:e.author=t.sent;case 6:case"end":return t.stop()}}),t)})))()},markAsRead:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1!==e.message.unread||e.isOwnMessage){t.next=9;break}return t.next=3,fetch("/rest/v1/messages/".concat(e.message.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({unread:0})});case 3:return s=t.sent,t.t0=console,t.next=7,s.json();case 7:t.t1=t.sent,t.t0.log.call(t.t0,t.t1);case 9:case"end":return t.stop()}}),t)})))()},deletePost:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/messages/".concat(e.message.id),{method:"DELETE"});case 2:e.$parent.fetchMessages();case 3:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchAuthor(),this.markAsRead()}},Ut=yt,Tt=(s("bafb"),Object(m["a"])(Ut,Pt,jt,!1,null,"154152bf",null)),Nt=Tt.exports,Dt={components:{MessageListItem:Nt},props:["messages"],methods:{fetchMessages:function(){this.$parent.fetchMessages()}},mounted:function(){this.$nextTick((function(){setTimeout((function(){console.log("HOwdy"),document.querySelector(".end").scrollIntoView()}),100)}))}},Mt=Dt,St=(s("5c51"),Object(m["a"])(Mt,kt,Rt,!1,null,"5cc1a052",null)),Bt=St.exports,Qt={props:["user"],components:{MessageList:Bt},data:function(){return{conversationsID:null,messages:[],interval:null}},methods:{sendMessage:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==document.getElementById("post-message").value){t.next=2;break}return t.abrupt("return");case 2:if(null===e.conversationsID){t.next=7;break}e.postMessage(),e.fetchMessages(),t.next=20;break;case 7:return console.log("CONVERSATION WITH NEW USER"),t.next=10,e.createConversation();case 10:return s=t.sent,console.log("CONVERSATion started with id: ",s),t.next=14,e.addUserToConversation(e.user.id);case 14:return t.next=16,e.addUserToConversation(e.$store.getters.currentUser.id);case 16:return t.next=18,e.postMessage();case 18:return t.next=20,e.fetchMessages();case 20:case"end":return t.stop()}}),t)})))()},fetchConversations:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/conversations/".concat(e));case 2:return s=t.sent,t.next=5,s.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))()},createConversation:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/conversations",{method:"POST"});case 2:return s=t.sent,t.next=5,s.json();case 5:return s=t.sent,e.conversationsID=s.lastInsertRowid,t.abrupt("return",s.lastInsertRowid);case 8:case"end":return t.stop()}}),t)})))()},addUserToConversation:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r={userId:e,conversationId:t.conversationsID},console.log(r),s.next=4,fetch("/rest/v1/conversationsXusers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:return n=s.sent,s.next=7,n.json();case 7:n=s.sent,console.log(n);case 9:case"end":return s.stop()}}),s)})))()},postMessage:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={senderId:e.$store.getters.currentUser.id,text:document.getElementById("post-message").value,send_date:Date.now(),conversationId:e.conversationsID},console.log("message",s),t.next=4,fetch("/rest/v1/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 4:return r=t.sent,t.next=7,r.json();case 7:r=t.sent,console.log(r),e.emptyInputField();case 10:case"end":return t.stop()}}),t)})))()},fetchMessages:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null===e.conversationsID){t.next=7;break}return t.next=3,fetch("/rest/v1/messages/".concat(e.conversationsID));case 3:return s=t.sent,t.next=6,s.json();case 6:e.messages=t.sent;case 7:case"end":return t.stop()}}),t)})))()},checkIfAlreadyAConversation:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchConversations(e.user.id);case 2:return s=t.sent,t.next=5,e.fetchConversations(e.$store.getters.currentUser.id);case 5:r=t.sent,s=s.map((function(e){return e["convID"]})),r=r.map((function(e){return e["convID"]})),n=s.filter((function(e){return r.includes(e)})),void 0!==n&&n.length>0&&(e.conversationsID=n[0]);case 10:case"end":return t.stop()}}),t)})))()},emptyInputField:function(){document.getElementById("post-message").value=""},setInterval:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this;this.interval=setInterval((function(){e.fetchMessages()}),5e3)})),goToProfile:function(){this.$router.push({name:"ProfilePage",params:{user:this.user}})}},created:function(){this.checkIfAlreadyAConversation(),this.fetchMessages(),this.setInterval()},destroyed:function(){clearInterval(this.interval)},watch:{conversationsID:function(){this.fetchMessages()}}},$t=Qt,qt=(s("2ba5"),Object(m["a"])($t,Et,Ot,!1,null,"75edcbb4",null)),Lt=qt.exports,Gt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"title-container"},[s("h1",{staticClass:"title"},[e._v(e._s(e.user.username)+"'s conversations")])]),s("div",{staticClass:"find-container"},[s("span",{staticClass:"material-icons"},[e._v("search")]),s("h2",{staticClass:"find-btn",on:{click:e.showUserSearch}},[e._v("find user")])]),e.findUser?s("div",[s("SearchUser")],1):e._e(),s("ConversationsList",{attrs:{convIDs:e.convIDs}})],1)},Ft=[],Jt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"list"},e._l(e.convIDs,(function(e){return s("ConversationsListItem",{key:e.id,attrs:{convID:e}})})),1)},zt=[],Xt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"head"},[s("div",{staticClass:"head-empty",on:{click:e.goToMessagePage}}),s("div",{staticClass:"head-delete"},[s("h2",{staticClass:"delete",on:{click:function(t){return t.preventDefault(),e.deleteConversation(t)}}},[e._v("x")])])]),s("div",{staticClass:"main",on:{click:e.goToMessagePage}},[s("div",{staticClass:"top"},e._l(this.otherUser,(function(t){return s("h2",{key:t.userId,staticClass:"conversation-item"},[e._v(e._s(t.username))])})),0),s("div",{staticClass:"center"},[s("div",{staticClass:"unread"},[0!=e.unreadMessages?s("h1",[e._v(e._s(e.unreadMessages))]):e._e()]),e._m(0)])])])},Kt=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"icon-img"},[s("span",{staticClass:"material-icons",staticStyle:{"font-size":"8em"}},[e._v("chat")])])}],Yt={props:["convID"],data:function(){return{otherUser:Object,unreadMessages:0}},computed:{currentUser:function(){return this.$store.getters.currentUser||""}},methods:{fetchUsersInConversations:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/conversationsXusers/".concat(e.convID.convID));case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,e.otherUser=s.filter((function(t){return t.userId!==e.currentUser.id}));case 7:case"end":return t.stop()}}),t)})))()},goToMessagePage:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchAuthor",e.otherUser[0].userId);case 2:s=t.sent,e.$router.push({name:"MessagePage",params:{user:s}});case 4:case"end":return t.stop()}}),t)})))()},fetchNumberOfNewMessages:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/messages/count/".concat(e.convID.convID));case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,e.unreadMessages=s[0]["COUNT(unread)"];case 7:case"end":return t.stop()}}),t)})))()},deleteConversation:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={userId:e.currentUser.id,conversationId:e.convID.convID},t.next=3,fetch("/rest/v1/conversationsXusers",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 3:return r=t.sent,t.next=6,r.json();case 6:r=t.sent,console.log(r),e.$parent.fetchConversations();case 9:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchUsersInConversations(),this.fetchNumberOfNewMessages()},watch:{otherUser:function(){null!==this.otherUser[0]&&void 0!==this.otherUser[0]||this.deleteConversation()}}},Vt=Yt,Zt=(s("4342"),Object(m["a"])(Vt,Xt,Kt,!1,null,"1b6496ad",null)),Wt=Zt.exports,Ht={props:["convIDs"],components:{ConversationsListItem:Wt},methods:{fetchConversations:function(){this.$parent.fetchConversations()}}},es=Ht,ts=(s("a381"),Object(m["a"])(es,Jt,zt,!1,null,"96242d04",null)),ss=ts.exports,rs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"search"},[s("input",{staticClass:"input-field",attrs:{placeholder:"Enter username",id:"search",type:"text"},on:{keyup:e.getSearchedUser}})]),s("div",{staticClass:"content"},[null!=e.searchedUsers?s("div",e._l(e.searchedUsers,(function(t){return s("div",{key:t.id,staticClass:"list-item",on:{click:function(s){return e.goToMessagePage(t)}}},[s("h3",[e._v(e._s(t.username))])])})),0):e._e()])])},ns=[],as={components:{},data:function(){return{searchedUsers:null}},methods:{getSearchedUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=document.getElementById("search").value,""!==s){t.next=4;break}return e.searchedUsers=null,t.abrupt("return");case 4:return t.next=6,fetch("/rest/v1/users/search/".concat(s));case 6:return r=t.sent,t.next=9,r.json();case 9:e.searchedUsers=t.sent;case 10:case"end":return t.stop()}}),t)})))()},goToMessagePage:function(e){this.$router.push({name:"MessagePage",params:{user:e}})}}},os=as,is=(s("d3ba"),Object(m["a"])(os,rs,ns,!1,null,"07514632",null)),us=is.exports,cs={props:["user"],components:{ConversationsList:ss,SearchUser:us},data:function(){return{convIDs:[],findUser:!1}},methods:{fetchConversations:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/conversations/".concat(e.user.id));case 2:return s=t.sent,t.next=5,s.json();case 5:s=t.sent,console.log(s),s&&(e.convIDs=s);case 8:case"end":return t.stop()}}),t)})))()},showUserSearch:function(){this.findUser=!this.findUser}},created:function(){this.fetchConversations()}},ls=cs,ds=(s("186d"),Object(m["a"])(ls,Gt,Ft,!1,null,"3f9745e2",null)),hs=ds.exports,ms=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h2",[e._v("Search")]),s("input",{attrs:{type:"text",placeholder:"enter username"}}),s("h2",[e._v("Users:")]),s("h2",[e._v("Name Email UserRole isRapported Warnings")]),s("div",{staticClass:"dropdown"},[s("h2",{staticClass:"drop-btn"},[e._v("Sort")]),s("div",{staticClass:"drop-items"},[s("h3",{on:{click:function(t){return e.setSorting("role")}}},[e._v("userrole")]),s("h3",{on:{click:function(t){return e.setSorting("az")}}},[e._v("A-Z")])])]),s("div",{staticClass:"list"},[s("UserList",{attrs:{sort:e.sort}})],1)])},fs=[],ps=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-list"},e._l(e.users,(function(e,t){return s("UserListItem",{key:e.id,attrs:{user:e,index:t}})})),1)},vs=[],gs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"container",on:{click:e.goToUserProfile}},[s("h2",[e._v(e._s(e.user.username))]),s("h2",[e._v(e._s(e.user.email))]),s("h2",[e._v(e._s(e.user.userRole))])])])},bs=[],Cs={props:["user","index"],methods:{goToUserProfile:function(){console.log("GO TO PROFILE"),this.$router.push("/"),this.$router.push({name:"ProfilePage",params:{user:this.user}})}}},ws=Cs,As=(s("670c"),Object(m["a"])(ws,gs,bs,!1,null,"92e2a34a",null)),xs=As.exports,_s={props:["sort"],components:{UserListItem:xs},data:function(){return{users:[]}},methods:{fetchAllUsers:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/users/");case 2:return s=t.sent,t.next=5,s.json();case 5:e.users=t.sent;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchAllUsers()},watch:{sort:function(){"az"===this.sort&&this.users.sort((function(e,t){return e.username.toLowerCase()>t.username.toLowerCase()?1:-1})),"role"===this.sort&&this.users.sort((function(e,t){return e.userRole<t.userRole?1:-1}))}}},Is=_s,Es=(s("874e"),Object(m["a"])(Is,ps,vs,!1,null,"73dd3150",null)),Os=Es.exports,ks={components:{UserList:Os},data:function(){return{sort:"normal"}},methods:{setSorting:function(e){this.sort=e},searchUser:function(){}}},Rs=ks,Ps=(s("ba77"),Object(m["a"])(Rs,ms,fs,!1,null,"7f62633e",null)),js=Ps.exports;r["a"].use(M["a"]);var ys=[{path:"/",name:"HomePage",component:ee},{path:"/forum/:subforum",name:"SubforumPage",component:be,props:!0},{path:"/thread/:thread",name:"ThreadPage",component:ot,props:!0},{path:"/threadCreation/:subforum",name:"threadCreation",component:ht,props:!0},{path:"/profile/:user",name:"ProfilePage",component:It,props:!0},{path:"/messagepage/:user",name:"MessagePage",component:Lt,props:!0},{path:"/conversationspage/:user",name:"ConversationsPage",component:hs,props:!0},{path:"/userlistpage",name:"UserListPage",component:js}],Us=new M["a"]({routes:ys,mode:"history",base:"/",scrollBehavior:function(){return{x:0,y:0}}}),Ts=Us,Ns=s("2f62");r["a"].use(Ns["a"]);var Ds=new Ns["a"].Store({state:{currentUser:null,author:null},getters:{currentUser:function(e){return e.currentUser},author:function(e){return e.author}},mutations:{setCurrentUser:function(e,t){e.currentUser=t},setAuthor:function(e,t){e.author=t}},actions:{fetchCurrentUser:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.commit,t.next=3,fetch("/rest/v1/whoami");case 3:return r=t.sent,t.next=6,r.json();case 6:r=t.sent,s("setCurrentUser",r);case 8:case"end":return t.stop()}}),t)})))()},postNewPost:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest/v1/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 2:return s=t.sent,t.next=5,s.json();case 5:return s=t.sent,t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})))()},signInUser:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function s(){var r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=e.commit,s.next=3,fetch("/rest/v1/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=s.sent,s.next=6,n.json();case 6:return n=s.sent,r("setCurrentUser",n),s.abrupt("return",n);case 9:case"end":return s.stop()}}),s)})))()},registerUser:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function s(){var r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=e.dispatch,s.next=3,fetch("/rest/v1/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=s.sent,s.next=6,n.json();case 6:return n=s.sent,t.id=n.lastInsertRowid,r("signInUser",t),s.abrupt("return",n);case 10:case"end":return s.stop()}}),s)})))()},fetchAuthor:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function s(){var r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=e.commit,s.next=3,fetch("/rest/v1/users/".concat(t));case 3:return n=s.sent,s.next=6,n.json();case 6:return n=s.sent,r("setAuthor",n),s.abrupt("return",n);case 9:case"end":return s.stop()}}),s)})))()}},modules:{}});r["a"].config.productionTip=!1,new r["a"]({store:Ds,router:Ts,render:function(e){return e(D)}}).$mount("#app")},"5b0b":function(e,t,s){"use strict";s("928b")},"5c51":function(e,t,s){"use strict";s("6a7b")},6677:function(e,t,s){},"670c":function(e,t,s){"use strict";s("43cb")},6783:function(e,t,s){"use strict";s("7d7d")},"6a7b":function(e,t,s){},"6e22":function(e,t,s){"use strict";s("dec3")},7087:function(e,t,s){"use strict";s("d081")},"745b":function(e,t,s){"use strict";s("ffe8")},7467:function(e,t,s){"use strict";s("d492")},"7d7d":function(e,t,s){},"809c":function(e,t,s){"use strict";s("ec04")},"84f8":function(e,t,s){},8512:function(e,t,s){"use strict";s("384e")},"85ec":function(e,t,s){},"874e":function(e,t,s){"use strict";s("6677")},"89fb":function(e,t,s){},"90b2":function(e,t,s){"use strict";s("1eff")},9232:function(e,t,s){},9268:function(e,t,s){"use strict";s("e379")},"928b":function(e,t,s){},9290:function(e,t,s){},9386:function(e,t,s){"use strict";s("252d")},"9f17":function(e,t,s){"use strict";s("9232")},a381:function(e,t,s){"use strict";s("89fb")},a4cf:function(e,t,s){},a9c1:function(e,t,s){},ba77:function(e,t,s){"use strict";s("a4cf")},bafb:function(e,t,s){"use strict";s("df18")},c479:function(e,t,s){"use strict";s("c602")},c602:function(e,t,s){},ccc8:function(e,t,s){},d081:function(e,t,s){},d3ba:function(e,t,s){"use strict";s("308b")},d492:function(e,t,s){},dec3:function(e,t,s){},df18:function(e,t,s){},e379:function(e,t,s){},ec04:function(e,t,s){},f0e4:function(e,t,s){"use strict";s("f365")},f365:function(e,t,s){},f4b0:function(e,t,s){},f9ba:function(e,t,s){},ffe8:function(e,t,s){}});
//# sourceMappingURL=app.056bb80d.js.map